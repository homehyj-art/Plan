<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ì•„í‹€ë€í‹°ìŠ¤ì˜ ì§€í˜œ: ë‚˜ì˜ ì§„ë¡œ ëª¨í—˜</title>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Noto+Sans+KR:wght@400;700&display=swap');
        
        body {
            font-family: 'Noto Sans KR', sans-serif;
            background-color: #0d1a2a;
            color: #e0e0e0;
            margin: 0;
            padding: 0;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            text-align: center;
        }
        
        #game-container {
            width: 90%;
            max-width: 1200px;
            height: 90vh;
            max-height: 800px;
            background: rgba(2, 6, 17, 0.7);
            border: 5px solid #ffcc00;
            border-radius: 20px;
            box-shadow: 0 0 50px rgba(255, 204, 0, 0.5);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            padding: 20px;
            position: relative;
        }

        #bg-video {
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            object-fit: cover;
            z-index: -1;
            opacity: 0.3;
        }
        
        h1, h2 {
            color: #ffcc00;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.5);
            font-size: 2.5em;
            margin-bottom: 20px;
        }
        
        #start-screen, #character-select-screen, #quest-screen, #result-screen, #dashboard-screen {
            display: none;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            width: 100%;
            height: 100%;
            opacity: 0;
            transition: opacity 1s ease-in-out;
        }
        
        .visible {
            display: flex !important;
            opacity: 1 !important;
        }
        
        .button {
            padding: 15px 30px;
            font-size: 1.2em;
            cursor: pointer;
            border: 2px solid #ffcc00;
            border-radius: 10px;
            background: linear-gradient(45deg, #0f2027, #2c5364);
            color: #fff;
            margin: 10px;
            transition: transform 0.2s, box-shadow 0.2s;
        }
        
        .button:hover {
            transform: scale(1.05);
            box-shadow: 0 0 15px #ffcc00;
        }
        
        #character-list {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
            justify-content: center;
        }
        
        .character-card {
            background-color: rgba(255, 255, 255, 0.1);
            border: 2px solid transparent;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            width: 180px;
            text-align: center;
        }
        
        .character-card img {
            width: 100px;
            height: 100px;
            border-radius: 50%;
            border: 3px solid #ffcc00;
            object-fit: cover;
        }
        
        .character-card.selected {
            border-color: #00ff00;
            box-shadow: 0 0 20px #00ff00;
            transform: scale(1.1);
        }
        
        .character-card h3 {
            color: #ffcc00;
            margin: 10px 0;
        }
        
        .character-card p {
            font-size: 0.9em;
            color: #ccc;
        }

        #quest-text {
            font-size: 1.5em;
            margin: 20px;
            text-align: center;
        }

        #quest-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 80%;
        }

        .quest-option {
            padding: 15px;
            font-size: 1.1em;
            border: 1px solid #aaa;
            border-radius: 8px;
            cursor: pointer;
            transition: background-color 0.2s, transform 0.2s;
            background-color: #2b2b2b;
        }
        
        .quest-option:hover {
            background-color: #444;
            transform: translateY(-3px);
        }
        
        #progress-bar-container {
            width: 80%;
            background-color: #555;
            border-radius: 10px;
            overflow: hidden;
            margin-top: 20px;
        }

        #progress-bar {
            height: 20px;
            background-color: #00ff00;
            width: 0%;
            transition: width 0.5s ease-in-out;
            text-align: center;
            line-height: 20px;
            color: #fff;
        }

        #result-content {
            font-size: 1.2em;
            margin: 20px;
        }

        #dashboard-content {
            width: 100%;
            height: 100%;
            overflow-y: auto;
            background-color: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            padding: 20px;
        }

        #dashboard-content table {
            width: 100%;
            border-collapse: collapse;
        }
        
        #dashboard-content th, #dashboard-content td {
            border: 1px solid #fff;
            padding: 10px;
            text-align: left;
        }

        .fade-out {
            opacity: 0;
            transition: opacity 1s;
        }
        .fade-in {
            opacity: 1;
            transition: opacity 1s;
        }

        .emoji {
            font-size: 2em;
        }
        
        .star-burst {
            animation: sparkle 0.8s ease-out forwards;
        }
        
        @keyframes sparkle {
            0% { transform: scale(0); opacity: 0; }
            50% { transform: scale(1.2); opacity: 1; }
            100% { transform: scale(1); opacity: 0.5; }
        }

    </style>
</head>
<body>
    <video id="bg-video" autoplay muted loop>
        <source src="https://assets.mixkit.co/videos/preview/mixkit-floating-lights-in-an-ocean-4067-large.mp4" type="video/mp4">
    </video>

    <div id="game-container">
        <div id="start-screen" class="visible">
            <h1>ìƒì–´ë²„ë¦° ì§€í˜œë¥¼ ì°¾ì•„ì„œ</h1>
            <p>ê³ ëŒ€ ì•„í‹€ë€í‹°ìŠ¤ ëŒ€ë¥™ì—ì„œ ë‹¹ì‹ ì˜ ìˆ¨ê²¨ì§„ ì ì¬ë ¥ì„ ë°œê²¬í•˜ì„¸ìš”!</p>
            <button class="button" id="start-btn">ëª¨í—˜ ì‹œì‘í•˜ê¸°</button>
        </div>

        <div id="character-select-screen">
            <h2>ìºë¦­í„° ì„ íƒ</h2>
            <p>ë‹¹ì‹ ì˜ ëª¨í—˜ì„ í•¨ê»˜í•  ìºë¦­í„°ë¥¼ ì„ íƒí•˜ì„¸ìš”. ìºë¦­í„°ë§ˆë‹¤ ë‹¤ë¥¸ ëª¨í—˜ì´ í¼ì³ì§‘ë‹ˆë‹¤!</p>
            <div id="character-list">
                <div class="character-card" data-character="scholar">
                    <img src="https://via.placeholder.com/100/ffcc00/000000?text=í•™ì" alt="ê³ ëŒ€ í•™ì">
                    <h3>ê³ ëŒ€ í•™ì</h3>
                    <p>ì§€í˜œì˜ ë¬¸í—Œì„ í•´ë…í•˜ë©° ì§€ì‹ì˜ ê¸¸ì„ ì—¬ëŠ” íƒí—˜ê°€</p>
                </div>
                <div class="character-card" data-character="shaman">
                    <img src="https://via.placeholder.com/100/2ecc71/000000?text=ì •ë ¹ìˆ ì‚¬" alt="ì •ë ¹ìˆ ì‚¬">
                    <h3>ì •ë ¹ìˆ ì‚¬</h3>
                    <p>ìì—°ì˜ í˜ê³¼ êµê°í•˜ë©° ìˆ¨ê²¨ì§„ ë¹„ë°€ì„ ë°íˆëŠ” ì</p>
                </div>
                <div class="character-card" data-character="warrior">
                    <img src="https://via.placeholder.com/100/e74c3c/000000?text=ì‹¸ì›€ê¾¼" alt="ì‹¸ì›€ê¾¼">
                    <h3>ì‹¸ì›€ê¾¼</h3>
                    <p>ê°•ì¸í•œ ì‹ ì²´ì™€ ìš©ê¸°ë¡œ ì–´ë–¤ ë‚œê´€ë„ í—¤ì³ë‚˜ê°€ëŠ” ì „ì‚¬</p>
                </div>
                <div class="character-card" data-character="artist">
                    <img src="https://via.placeholder.com/100/9b59b6/000000?text=ì˜ˆìˆ ê°€" alt="ì˜ˆìˆ ê°€">
                    <h3>ì˜ˆìˆ ê°€</h3>
                    <p>ì•„ë¦„ë‹¤ìš´ ìŒì•…ê³¼ ê·¸ë¦¼ìœ¼ë¡œ ì„¸ìƒì„ ë¬¼ë“¤ì´ëŠ” ì°½ì¡°ì</p>
                </div>
            </div>
            <button class="button" id="select-char-btn" disabled>ì„ íƒ ì™„ë£Œ</button>
        </div>

        <div id="quest-screen">
            <h2 id="quest-title"></h2>
            <p id="quest-story"></p>
            <div id="quest-text"></div>
            <div id="quest-options"></div>
            <div id="progress-bar-container">
                <div id="progress-bar">0%</div>
            </div>
        </div>

        <div id="result-screen">
            <h2>ëª¨í—˜ ì™„ë£Œ!</h2>
            <p>ì¶•í•˜í•©ë‹ˆë‹¤! ë‹¹ì‹ ì˜ ëª¨í—˜ì´ ëë‚¬ìŠµë‹ˆë‹¤. ë‹¹ì‹ ì˜ ê°•ì  ì§€ëŠ¥ì€ ë°”ë¡œ...</p>
            <div id="result-content"></div>
            <button class="button" id="restart-btn">ë‹¤ì‹œ ì‹œì‘í•˜ê¸°</button>
            <button class="button" id="dashboard-btn">êµì‚¬ ëŒ€ì‹œë³´ë“œ ë³´ê¸°</button>
        </div>

        <div id="dashboard-screen">
            <h2>êµì‚¬ ëŒ€ì‹œë³´ë“œ</h2>
            <div id="dashboard-content">
                <p>ë¡œë”© ì¤‘...</p>
            </div>
            <button class="button" id="back-to-home-btn">ì²˜ìŒìœ¼ë¡œ</button>
        </div>
    </div>

    <audio id="bgm" loop>
        <source src="https://assets.mixkit.co/sfx/preview/mixkit-ancient-forest-soundscape-2067.mp3" type="audio/mpeg">
    </audio>

    <script>
        const gameContainer = document.getElementById('game-container');
        const startScreen = document.getElementById('start-screen');
        const characterSelectScreen = document.getElementById('character-select-screen');
        const questScreen = document.getElementById('quest-screen');
        const resultScreen = document.getElementById('result-screen');
        const dashboardScreen = document.getElementById('dashboard-screen');
        const startBtn = document.getElementById('start-btn');
        const characterCards = document.querySelectorAll('.character-card');
        const selectCharBtn = document.getElementById('select-char-btn');
        const questTitle = document.getElementById('quest-title');
        const questStory = document.getElementById('quest-story');
        const questText = document.getElementById('quest-text');
        const questOptions = document.getElementById('quest-options');
        const progressBar = document.getElementById('progress-bar');
        const resultContent = document.getElementById('result-content');
        const restartBtn = document.getElementById('restart-btn');
        const dashboardBtn = document.getElementById('dashboard-btn');
        const backToHomeBtn = document.getElementById('back-to-home-btn');
        const bgm = document.getElementById('bgm');

        let currentScreen = 'start';
        let selectedCharacter = null;
        let questIndex = 0;
        let scores = { 'ì–¸ì–´ì§€ëŠ¥': 0, 'ë…¼ë¦¬ìˆ˜í•™ì§€ëŠ¥': 0, 'ê³µê°„ì§€ëŠ¥': 0, 'ì‹ ì²´ìš´ë™ì§€ëŠ¥': 0, 'ìŒì•…ì§€ëŠ¥': 0, 'ëŒ€ì¸ê´€ê³„ì§€ëŠ¥': 0, 'ê°œì¸ë‚´ì ì§€ëŠ¥': 0, 'ìì—°ì£¼ì˜ì§€ëŠ¥': 0 };
        const totalQuests = 20;
        let studentResults = []; // êµì‚¬ ëŒ€ì‹œë³´ë“œìš© ë°ì´í„°

        // ëª¨ë“  ìºë¦­í„°ê°€ ê³µìœ í•˜ëŠ” ê³µí†µ í€˜ìŠ¤íŠ¸ ëª©ë¡
        const allQuests = [
            { title: 'ìƒì–´ë²„ë¦° ê³ ëŒ€ì–´ í•´ë…', text: 'ì˜¤ë˜ëœ ë¹„ì„ì— ì•Œ ìˆ˜ ì—†ëŠ” ì–¸ì–´ê°€ ìƒˆê²¨ì ¸ ìˆì–´ìš”. ë¹„ë¬¸ì„ í•´ë…í•´ ë‹¤ìŒ ì¥ì†Œì˜ íŒíŠ¸ë¥¼ ì–»ìœ¼ì„¸ìš”.', options: ['ë‹¨ì–´ë¥¼ ì¡°í•©í•˜ì—¬ ë¬¸ì¥ ì™„ì„±í•˜ê¸° (ì–¸ì–´ì§€ëŠ¥ +1)', 'ë¹„ì„ì˜ ê¸°í•˜í•™ì  íŒ¨í„´ ë¶„ì„í•˜ê¸° (ë…¼ë¦¬ìˆ˜í•™ì§€ëŠ¥ +1)'], correct: 0 },
            { title: 'ë¯¸ê¶ì˜ ë…¼ë¦¬ í¼ì¦', text: 'ì•ìœ¼ë¡œ ë‚˜ì•„ê°€ë ¤ë©´ 3ê°œì˜ ë…¼ë¦¬ í¼ì¦ì„ í’€ì–´ì•¼ í•©ë‹ˆë‹¤. ì •í™•í•œ ë‹µì„ ì°¾ì•„ ê¸¸ì„ ì—¬ì„¸ìš”.', options: ['ìˆ˜ì—´ì˜ ê·œì¹™ ì°¾ê¸° (ë…¼ë¦¬ìˆ˜í•™ì§€ëŠ¥ +1)', 'ë¬¸ë§¥ìƒ ì–´ìƒ‰í•œ ë‹¨ì–´ ì°¾ê¸° (ì–¸ì–´ì§€ëŠ¥ +1)'], correct: 0 },
            { title: 'ë‚˜ë¬´ ì •ë ¹ê³¼ì˜ êµê°', text: 'ìŠ¬í””ì— ë¹ ì§„ ë‚˜ë¬´ ì •ë ¹ì´ ìš¸ê³  ìˆì–´ìš”. ì •ë ¹ì„ ë‹¬ë˜ì„œ ìˆ²ì˜ ê¸¸ì„ ì—´ì–´ì£¼ì„¸ìš”.', options: ['ë‚˜ë¬´ì˜ ë‚˜ì´í…Œë¥¼ ì„¸ì–´ë³´ê¸° (ìì—°ì£¼ì˜ì§€ëŠ¥ +1)', 'ë§ˆìŒìœ¼ë¡œ ì •ë ¹ì˜ ê°ì • ëŠë¼ê¸° (ê°œì¸ë‚´ì ì§€ëŠ¥ +1)'], correct: 1 },
            { title: 'ìˆ¨ê²¨ì§„ ë™êµ´ ì§€ë„ ê·¸ë¦¬ê¸°', text: 'ë³µì¡í•œ ë™êµ´ì„ í†µê³¼í•´ì•¼ í•´ìš”. ê¸°ì–µë ¥ì„ ë™ì›í•´ ì •í™•í•œ ì§€ë„ë¥¼ ê·¸ë ¤ ì¶œêµ¬ë¥¼ ì°¾ìœ¼ì„¸ìš”.', options: ['ë™êµ´ì˜ êµ¬ì¡°ë¥¼ ì‹œê°í™”í•˜ê¸° (ê³µê°„ì§€ëŠ¥ +1)', 'ë™êµ´ì˜ í™˜ê²½ì  íŠ¹ì§• ê¸°ë¡í•˜ê¸° (ìì—°ì£¼ì˜ì§€ëŠ¥ +1)'], correct: 0 },
            { title: 'í­í¬ ì˜¤ë¥´ê¸°', text: 'ê°€íŒŒë¥¸ í­í¬ë¥¼ ì˜¬ë¼ê°€ì•¼ í•©ë‹ˆë‹¤. ê°•ì¸í•œ ì²´ë ¥ì„ ì´ìš©í•´ í­í¬ë¥¼ ë“±ë°˜í•˜ì„¸ìš”!', options: ['ì˜¬ë¼ê°€ëŠ” ë°©ë²•ì„ ê³„íší•˜ê³  ì‹¤í–‰í•˜ê¸° (ì‹ ì²´ìš´ë™ì§€ëŠ¥ +1)', 'ì²´ë ¥ì˜ í•œê³„ë¥¼ ê·¹ë³µí•˜ë©° ìì‹ ì—ê²Œ ì§‘ì¤‘í•˜ê¸° (ê°œì¸ë‚´ì ì§€ëŠ¥ +1)'], correct: 0 },
            { title: 'ê±°ìš¸ì˜ ë°© íƒˆì¶œ', text: 'ìì‹ ê³¼ ë˜‘ê°™ì€ ê±°ìš¸ ì† ë¶„ì‹ ê³¼ ë§ˆì£¼í–ˆì–´ìš”. ë¶„ì‹ ì˜ ì›€ì§ì„ì„ ì˜ˆì¸¡í•´ ë°©ì„ íƒˆì¶œí•˜ì„¸ìš”.', options: ['ë¶„ì‹ ì˜ ì›€ì§ì„ì„ ë”°ë¼í•˜ë©° ì˜ˆì¸¡í•˜ê¸° (ì‹ ì²´ìš´ë™ì§€ëŠ¥ +1)', 'ìì‹ ì˜ ë§ˆìŒì„ ë“¤ì—¬ë‹¤ë³´ë©° í‰ì •ì‹¬ ìœ ì§€í•˜ê¸° (ê°œì¸ë‚´ì ì§€ëŠ¥ +1)'], correct: 1 },
            { title: 'í•˜í”„ì˜ ì¡°ê° ë§ì¶”ê¸°', text: 'ë¶€ì„œì§„ í•˜í”„ë¥¼ ì—°ì£¼í•´ì•¼ í•´ìš”. í•˜í”„ì˜ ì¡°ê°ì„ ì˜¬ë°”ë¥¸ ìˆœì„œë¡œ ë§ì¶°ë³´ì„¸ìš”.', options: ['ì¡°ê°ì˜ ëª¨ì–‘ê³¼ ìœ„ì¹˜ë¥¼ íŒŒì•…í•˜ê¸° (ê³µê°„ì§€ëŠ¥ +1)', 'ìŒì˜ ë†’ë‚®ì´ë¥¼ ìƒìƒí•˜ë©° ì¡°ê° ë°°ì¹˜í•˜ê¸° (ìŒì•…ì§€ëŠ¥ +1)'], correct: 1 },
            { title: 'ë§ˆì„ ì‚¬ëŒë“¤ì˜ ì¶•ì œ ë•ê¸°', text: 'ë§ˆì„ ì¶•ì œì— í™œê¸°ê°€ ì—†ì–´ìš”. ì‚¬ëŒë“¤ê³¼ í•¨ê»˜ í˜ì„ í•©ì³ ì¦ê±°ìš´ ì¶•ì œë¥¼ ë§Œë“¤ì–´ì£¼ì„¸ìš”.', options: ['ìŒì•…ì„ ë§Œë“¤ì–´ ì¶•ì œì˜ ë¶„ìœ„ê¸° ë„ìš°ê¸° (ìŒì•…ì§€ëŠ¥ +1)', 'ë§ˆì„ ì‚¬ëŒë“¤ê³¼ ì†Œí†µí•˜ë©° ì—­í•  ë¶„ë‹´í•˜ê¸° (ëŒ€ì¸ê´€ê³„ì§€ëŠ¥ +1)'], correct: 1 },
            // ë‚˜ë¨¸ì§€ 12ê°œì˜ í€˜ìŠ¤íŠ¸ëŠ” ì´ ê³³ì— ì¶”ê°€ (ì´ 20ê°œ)
            { title: 'ì–´ë‘ ì˜ ë™êµ´ì—ì„œ ê¸¸ ì°¾ê¸°', text: 'ì–´ë‘  ì†ì—ì„œ ê¸¸ì„ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤. ì£¼ë³€ í™˜ê²½ì„ ì˜ ì‚´í´ì„œ ë‚˜ì•„ê°€ì„¸ìš”.', options: ['ë°”ë‹¥ì˜ í™ ëƒ„ìƒˆë¡œ ë°©í–¥ì„ ì°¾ê¸° (ìì—°ì£¼ì˜ì§€ëŠ¥ +1)', 'ë¯¸ì„¸í•œ ì†Œë¦¬ë¥¼ ë“£ê³  ê¸¸ì˜ ë°©í–¥ ì˜ˆì¸¡í•˜ê¸° (ìŒì•…ì§€ëŠ¥ +1)'], correct: 1 },
            { title: 'ìœ„í—˜í•œ ê°• ê±´ë„ˆê¸°', text: 'ê°•ì„ ê±´ë„ˆì•¼ í•˜ì§€ë§Œ ë‹¤ë¦¬ê°€ ë¶€ì„œì¡ŒìŠµë‹ˆë‹¤. ì§ì ‘ ê±´ë„ˆëŠ” ë°©ë²•ì„ ì°¾ì•„ë³´ì„¸ìš”.', options: ['ê°€ì¥ ë¹ ë¥¸ ìœ ì†ì„ ê³„ì‚°í•˜ì—¬ ë›°ì–´ ê±´ë„ˆê¸° (ë…¼ë¦¬ìˆ˜í•™ì§€ëŠ¥ +1)', 'ê°• ì£¼ë³€ì˜ ë©êµ´ì„ ì´ìš©í•´ ë°§ì¤„ ë§Œë“¤ê¸° (ì‹ ì²´ìš´ë™ì§€ëŠ¥ +1)'], correct: 1 },
            { title: 'í™˜ìƒì˜ ìˆ²ì—ì„œ íƒˆì¶œ', text: 'ìˆ²ì˜ í™˜ìˆ ì— ê±¸ë ¤ ê¸¸ì„ ìƒì—ˆì–´ìš”. ì´ì„±ì ìœ¼ë¡œ ìƒê°í•´ì„œ íƒˆì¶œí•˜ì„¸ìš”.', options: ['í™˜ìˆ ì˜ íŒ¨í„´ì„ ë¶„ì„í•˜ì—¬ ê·œì¹™ ì°¾ê¸° (ë…¼ë¦¬ìˆ˜í•™ì§€ëŠ¥ +1)', 'ìˆ²ì†ì˜ ë™ì‹ë¬¼ê³¼ ëŒ€í™”í•˜ë©° íƒˆì¶œêµ¬ ì°¾ê¸° (ëŒ€ì¸ê´€ê³„ì§€ëŠ¥ +1)'], correct: 0 },
            { title: 'ê³ ëŒ€ ì„ìƒê³¼ì˜ ëŒ€í™”', text: 'ë§ì„ í•˜ì§€ ì•ŠëŠ” ê³ ëŒ€ ì„ìƒì´ ìˆ˜ìˆ˜ê»˜ë¼ë¥¼ ë˜ì§‘ë‹ˆë‹¤. ì„ìƒì˜ ì˜ë„ë¥¼ íŒŒì•…í•˜ì„¸ìš”.', options: ['ì„ìƒì˜ í‘œì •ì„ ë³´ê³  ê°ì • ì½ì–´ë‚´ê¸° (ëŒ€ì¸ê´€ê³„ì§€ëŠ¥ +1)', 'ì„ìƒì´ ë˜ì§„ ìˆ˜ìˆ˜ê»˜ë¼ë¥¼ ë…¼ë¦¬ì ìœ¼ë¡œ í’€ê¸° (ë…¼ë¦¬ìˆ˜í•™ì§€ëŠ¥ +1)'], correct: 1 },
            { title: 'ìƒì–´ë²„ë¦° ë…¸ë˜ ì°¾ê¸°', text: 'ìƒì–´ë²„ë¦° ì•„í‹€ë€í‹°ìŠ¤ ëŒ€ë¥™ì˜ ë…¸ë˜ë¥¼ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤. ë…¸ë˜ë¥¼ ë³µì›í•´ ë³´ì„¸ìš”.', options: ['í©ì–´ì§„ ì•…ë³´ ì¡°ê°ì„ ë§ì¶°ë³´ê¸° (ìŒì•…ì§€ëŠ¥ +1)', 'ì•…ë³´ì˜ ì—­ì‚¬ì  ì˜ë¯¸ë¥¼ íŒŒì•…í•˜ê¸° (ì–¸ì–´ì§€ëŠ¥ +1)'], correct: 0 },
            { title: 'ë§ˆìŒì˜ ìˆ²ê¸¸ ê±·ê¸°', text: 'ë‹¹ì‹ ì˜ ë§ˆìŒì†ìœ¼ë¡œ ë“¤ì–´ì™€ ê¹Šì€ ìˆ²ê¸¸ì„ ê±·ê²Œ ë˜ì—ˆìŠµë‹ˆë‹¤. ìì‹ ì˜ ê°ì •ì„ ë‹¤ë£¨ì–´ì•¼ í•©ë‹ˆë‹¤.', options: ['ë¶ˆì•ˆí•œ ê°ì •ì— ì†”ì§í•˜ê²Œ ë§ˆì£¼í•˜ê¸° (ê°œì¸ë‚´ì ì§€ëŠ¥ +1)', 'ë§ˆìŒì˜ ìˆ² ì§€í˜•ì„ ìƒìƒí•˜ë©° ê¸¸ ì°¾ì•„ê°€ê¸° (ê³µê°„ì§€ëŠ¥ +1)'], correct: 0 },
            { title: 'ì‹ ë¹„í•œ ë™ì‹ë¬¼ ë¶„ë¥˜', text: 'ì‹ ë¹„í•œ ë™ì‹ë¬¼ë“¤ì´ ê°€ë“í•œ ì •ì›ì—ì„œ ê¸¸ì„ ìƒì—ˆì–´ìš”. ì´ë“¤ì„ ë¶„ë¥˜í•´ ì§ˆì„œë¥¼ ì°¾ì•„ì•¼ í•©ë‹ˆë‹¤.', options: ['ë™ì‹ë¬¼ì˜ íŠ¹ì„±ì„ íŒŒì•…í•´ ê·¸ë£¹ìœ¼ë¡œ ë‚˜ëˆ„ê¸° (ìì—°ì£¼ì˜ì§€ëŠ¥ +1)', 'ë™ì‹ë¬¼ê³¼ ì†Œí†µí•´ ê¸¸ì„ ë¬»ê¸° (ëŒ€ì¸ê´€ê³„ì§€ëŠ¥ +1)'], correct: 0 },
            { title: 'ë¬´ìš©ìˆ˜ì™€ ì¶¤ì¶”ê¸°', text: 'ê¸¸ì„ ì—´ì–´ì£¼ëŠ” ë¬´ìš©ìˆ˜ì™€ í•¨ê»˜ ì¶¤ì„ ì¶”ì–´ì•¼ í•©ë‹ˆë‹¤. ë¬´ìš©ìˆ˜ì˜ ë™ì‘ì„ ì™„ë²½íˆ ë”°ë¼í•˜ì„¸ìš”.', options: ['ë™ì‘ì˜ ìˆœì„œë¥¼ ì™¸ìš°ê³  ë”°ë¼í•˜ê¸° (ì‹ ì²´ìš´ë™ì§€ëŠ¥ +1)', 'ë¬´ìš©ìˆ˜ì˜ ì¶¤ì— ìˆ¨ê²¨ì§„ ì´ì•¼ê¸°ë¥¼ íŒŒì•…í•˜ê¸° (ì–¸ì–´ì§€ëŠ¥ +1)'], correct: 0 },
            { title: 'ì‹ ì „ì˜ ë³´ë¬¼ ì§€ë„ ê·¸ë¦¬ê¸°', text: 'ì‹ ì „ ì•ˆì˜ ë³´ë¬¼ ì§€ë„ê°€ ì‚¬ë¼ì¡Œì–´ìš”. ì§€ë„ë¥¼ ìƒìƒí•´ì„œ ë‹¤ì‹œ ê·¸ë ¤ì•¼ í•©ë‹ˆë‹¤.', options: ['ì‹ ì „ì˜ êµ¬ì¡°ë¥¼ ê¸°ì–µí•˜ë©° ê¸¸ ê·¸ë¦¬ê¸° (ê³µê°„ì§€ëŠ¥ +1)', 'ë³´ë¬¼ì˜ ì—­ì‚¬ì  ê°€ì¹˜ë¥¼ ë– ì˜¬ë¦¬ë©° ê·¸ë¦¬ê¸° (ê°œì¸ë‚´ì ì§€ëŠ¥ +1)'], correct: 0 },
            { title: 'ì „ì„¤ì˜ ë¬´ê¸° ë§Œë“¤ê¸°', text: 'ìƒì–´ë²„ë¦° ë¬´ê¸°ë¥¼ ë§Œë“¤ê¸° ìœ„í•œ ì¬ë£Œë¥¼ ëª¨ì•„ì•¼ í•©ë‹ˆë‹¤. ì¬ë£Œë¥¼ ì¡°í•©í•´ ë¬´ê¸°ë¥¼ ë§Œë“œì„¸ìš”.', options: ['ì¬ë£Œì˜ í™”í•™ì  ë°˜ì‘ì„ ê³ ë ¤í•´ ì¡°í•©í•˜ê¸° (ë…¼ë¦¬ìˆ˜í•™ì§€ëŠ¥ +1)', 'ì¬ë£Œì˜ íŠ¹ì„±ì„ ëŠë¼ê³  ë³¸ëŠ¥ì ìœ¼ë¡œ ì¡°í•©í•˜ê¸° (ì‹ ì²´ìš´ë™ì§€ëŠ¥ +1)'], correct: 0 },
            { title: 'ê³ ëŒ€ ë¬¸ì„œ ë³µì›', text: 'ê³ ëŒ€ ë¬¸ì„œê°€ ì‹¬í•˜ê²Œ í›¼ì†ë˜ì—ˆìŠµë‹ˆë‹¤. ë¬¸ì„œë¥¼ ë³µì›í•´ ë‹¤ìŒ í€˜ìŠ¤íŠ¸ì˜ íŒíŠ¸ë¥¼ ì–»ìœ¼ì„¸ìš”.', options: ['ë¬¸ì„œì— ì‚¬ìš©ëœ ì–¸ì–´ì˜ íŠ¹ì§•ì„ íŒŒì•…í•´ ë¹ˆì¹¸ ì±„ìš°ê¸° (ì–¸ì–´ì§€ëŠ¥ +1)', 'ë¬¸ì„œì˜ í›¼ì†ëœ ë¶€ë¶„ì„ í¼ì¦ì²˜ëŸ¼ ë§ì¶° ë³µì›í•˜ê¸° (ê³µê°„ì§€ëŠ¥ +1)'], correct: 0 },
            { title: 'ì‚¬ëƒ¥ê¾¼ ê¸¸ë“¤ì´ê¸°', text: 'ì‚¬ë‚˜ìš´ ì‚¬ëƒ¥ê¾¼ì´ ê¸¸ì„ ë§‰ê³  ìˆìŠµë‹ˆë‹¤. ì‚¬ëƒ¥ê¾¼ì˜ ë§ˆìŒì„ ì–»ì–´ ê¸¸ì„ ë¹„ì¼œë‹¬ë¼ê³  í•˜ì„¸ìš”.', options: ['ì‚¬ëƒ¥ê¾¼ì´ ì¢‹ì•„í•˜ëŠ” ë…¸ë˜ë¥¼ ë¶ˆëŸ¬ì£¼ê¸° (ìŒì•…ì§€ëŠ¥ +1)', 'ì‚¬ëƒ¥ê¾¼ì˜ ë¶„ë…¸ ì›ì¸ì„ ë¶„ì„í•˜ê³  ìœ„ë¡œí•˜ê¸° (ëŒ€ì¸ê´€ê³„ì§€ëŠ¥ +1)'], correct: 1 }
        ];

        const characterData = {
            scholar: { name: 'ê³ ëŒ€ í•™ì' },
            shaman: { name: 'ì •ë ¹ìˆ ì‚¬' },
            warrior: { name: 'ì‹¸ì›€ê¾¼' },
            artist: { name: 'ì˜ˆìˆ ê°€' }
        };

        const intelligenceInfo = {
            'ì–¸ì–´ì§€ëŠ¥': { title: 'ì–¸ì–´ì§€ëŠ¥', desc: 'ë§ê³¼ ê¸€ì„ í†µí•´ ìì‹ ì˜ ìƒê°ì„ í‘œí˜„í•˜ê³  ì´í•´í•˜ëŠ” ëŠ¥ë ¥', emoji: 'âœï¸' },
            'ë…¼ë¦¬ìˆ˜í•™ì§€ëŠ¥': { title: 'ë…¼ë¦¬ìˆ˜í•™ì§€ëŠ¥', desc: 'ë…¼ë¦¬ì ì¸ ë¬¸ì œ í•´ê²°, íŒ¨í„´ ì¸ì‹, ì¶”ë¦¬ ëŠ¥ë ¥', emoji: 'ğŸ¤”' },
            'ê³µê°„ì§€ëŠ¥': { title: 'ê³µê°„ì§€ëŠ¥', desc: 'ê³µê°„, í˜•íƒœ, ì´ë¯¸ì§€ë¥¼ ì‹œê°ì ìœ¼ë¡œ íŒŒì•…í•˜ê³  ë‹¤ë£¨ëŠ” ëŠ¥ë ¥', emoji: 'ğŸ—ºï¸' },
            'ì‹ ì²´ìš´ë™ì§€ëŠ¥': { title: 'ì‹ ì²´ìš´ë™ì§€ëŠ¥', desc: 'ì‹ ì²´ë¥¼ ììœ ìì¬ë¡œ ë‹¤ë£¨ê³  í‘œí˜„í•˜ëŠ” ëŠ¥ë ¥', emoji: 'ğŸƒ' },
            'ìŒì•…ì§€ëŠ¥': { title: 'ìŒì•…ì§€ëŠ¥', desc: 'ìŒì•…ì  íŒ¨í„´ì„ ì¸ì‹í•˜ê³  ì°½ì¡°í•˜ëŠ” ëŠ¥ë ¥', emoji: 'ğŸµ' },
            'ëŒ€ì¸ê´€ê³„ì§€ëŠ¥': { title: 'ëŒ€ì¸ê´€ê³„ì§€ëŠ¥', desc: 'íƒ€ì¸ì˜ ê°ì •, ì˜ë„ë¥¼ ì´í•´í•˜ê³  ì†Œí†µí•˜ëŠ” ëŠ¥ë ¥', emoji: 'ğŸ‘¥' },
            'ê°œì¸ë‚´ì ì§€ëŠ¥': { title: 'ê°œì¸ë‚´ì ì§€ëŠ¥', desc: 'ìì‹ ì˜ ê°ì •, ëª©í‘œ, ê°•ì ì„ ì´í•´í•˜ëŠ” ëŠ¥ë ¥', emoji: 'ğŸ§˜' },
            'ìì—°ì£¼ì˜ì§€ëŠ¥': { title: 'ìì—°ì£¼ì˜ì§€ëŠ¥', desc: 'ìì—° í™˜ê²½ì˜ íŠ¹ì§•ì„ ì¸ì‹í•˜ê³  ë¶„ë¥˜í•˜ëŠ” ëŠ¥ë ¥', emoji: 'ğŸŒ³' }
        };

        const playBGM = () => {
            bgm.volume = 0.5;
            bgm.play();
        };

        const stopBGM = () => {
            bgm.pause();
            bgm.currentTime = 0;
        };

        const switchScreen = (from, to) => {
            document.getElementById(from).classList.remove('visible');
            setTimeout(() => {
                document.getElementById(to).classList.add('visible');
            }, 500);
        };

        const startGame = () => {
            switchScreen('start-screen', 'character-select-screen');
            playBGM();
        };

        const selectCharacter = (e) => {
            const card = e.currentTarget;
            characterCards.forEach(c => c.classList.remove('selected'));
            card.classList.add('selected');
            selectedCharacter = card.dataset.character;
            selectCharBtn.disabled = false;
        };

        const startQuest = () => {
            if (!selectedCharacter) return;
            switchScreen('character-select-screen', 'quest-screen');
            questIndex = 0;
            updateQuest();
        };

        const updateQuest = () => {
            if (questIndex >= totalQuests) {
                endGame();
                return;
            }

            const currentQuest = allQuests[questIndex];
            questTitle.textContent = `í€˜ìŠ¤íŠ¸ ${questIndex + 1}/${totalQuests}`;
            questStory.textContent = characterData[selectedCharacter].story || 'ê¹Šì€ ë°”ë‹·ì† ê³ ëŒ€ ìœ ì ì§€, ë‹¹ì‹ ì˜ ëª¨í—˜ì´ ì‹œì‘ë©ë‹ˆë‹¤.';
            questText.textContent = currentQuest.text;
            questOptions.innerHTML = '';

            currentQuest.options.forEach((option, index) => {
                const button = document.createElement('button');
                button.textContent = option;
                button.classList.add('quest-option');
                button.addEventListener('click', () => handleAnswer(index, currentQuest.correct));
                questOptions.appendChild(button);
            });

            const progress = (questIndex / totalQuests) * 100;
            progressBar.style.width = `${progress}%`;
            progressBar.textContent = `${Math.round(progress)}%`;
        };
        
        const handleAnswer = (selectedIndex, correctIndex) => {
            const options = questOptions.querySelectorAll('.quest-option');
            options.forEach(btn => btn.disabled = true);
            
            const selectedOptionText = options[selectedIndex].textContent;
            const intelligenceType = selectedOptionText.match(/\((.*?)\s*\+1\)/)[1];
            scores[intelligenceType]++;

            questIndex++;
            setTimeout(updateQuest, 1000);
        };

        const endGame = () => {
            const resultList = Object.entries(scores).sort((a, b) => b[1] - a[1]);
            const dominantIntelligence = resultList[0][0];
            const dominantScore = resultList[0][1];
            
            resultContent.innerHTML = `
                <p>ë‹¹ì‹ ì˜ ê°•ì  ì§€ëŠ¥ì€ ë°”ë¡œ <span style="font-size:1.5em; font-weight:bold; color:#ffcc00;">${intelligenceInfo[dominantIntelligence].title}</span>ì…ë‹ˆë‹¤! ğŸ‰</p>
                <p>${intelligenceInfo[dominantIntelligence].emoji}</p>
                <p>${intelligenceInfo[dominantIntelligence].desc}</p>
                <p>ëª¨í—˜ì„ í†µí•´ ${dominantIntelligence}ì„(ë¥¼) ${dominantScore}ë²ˆ ë°œíœ˜í–ˆìŠµë‹ˆë‹¤!</p>
            `;
            
            // ëŒ€ì‹œë³´ë“œ ë°ì´í„° ì €ì¥
            const studentName = prompt("ì´ë¦„ì„ ì…ë ¥í•˜ì„¸ìš”:") || "ìµëª…";
            studentResults.push({ name: studentName, character: selectedCharacter, scores: { ...scores } });

            // ìŠ¤ì½”ì–´ ë¦¬ì…‹
            scores = { 'ì–¸ì–´ì§€ëŠ¥': 0, 'ë…¼ë¦¬ìˆ˜í•™ì§€ëŠ¥': 0, 'ê³µê°„ì§€ëŠ¥': 0, 'ì‹ ì²´ìš´ë™ì§€ëŠ¥': 0, 'ìŒì•…ì§€ëŠ¥': 0, 'ëŒ€ì¸ê´€ê³„ì§€ëŠ¥': 0, 'ê°œì¸ë‚´ì ì§€ëŠ¥': 0, 'ìì—°ì£¼ì˜ì§€ëŠ¥': 0 };

            switchScreen('quest-screen', 'result-screen');
        };

        const showDashboard = () => {
            switchScreen('result-screen', 'dashboard-screen');
            const dashboardContent = document.getElementById('dashboard-content');
            
            if (studentResults.length === 0) {
                dashboardContent.innerHTML = '<p>ì•„ì§ ì°¸ì—¬í•œ í•™ìƒì´ ì—†ìŠµë‹ˆë‹¤.</p>';
                return;
            }

            let tableHTML = '<table><thead><tr><th>ì´ë¦„</th><th>ìºë¦­í„°</th><th>ê°•ì  ì§€ëŠ¥</th></tr></thead><tbody>';
            studentResults.forEach(student => {
                const sortedScores = Object.entries(student.scores).sort((a, b) => b[1] - a[1]);
                const dominant = sortedScores[0][0];
                tableHTML += `<tr><td>${student.name}</td><td>${characterData[student.character].name}</td><td>${intelligenceInfo[dominant].title}</td></tr>`;
            });
            tableHTML += '</tbody></table>';
            dashboardContent.innerHTML = tableHTML;
        };

        const restartGame = () => {
            switchScreen('result-screen', 'start-screen');
        };

        const goBackToHome = () => {
            switchScreen('dashboard-screen', 'start-screen');
        };

        startBtn.addEventListener('click', startGame);
        characterCards.forEach(card => card.addEventListener('click', selectCharacter));
        selectCharBtn.addEventListener('click', startQuest);
        restartBtn.addEventListener('click', restartGame);
        dashboardBtn.addEventListener('click', showDashboard);
        backToHomeBtn.addEventListener('click', goBackToHome);
    </script>
</body>
</html>
