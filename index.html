<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>✨ 다중지능 탐험 RPG (Final Mix)</title>
<link href="https://fonts.googleapis.com/css2?family=Jua&family=Noto+Sans+KR:wght@400;700&display=swap" rel="stylesheet">
<style>
    :root {
        --primary-gold: #ffd700;
        --dark-bg: #0c0a18;
        --card-bg: rgba(22, 18, 48, 0.85);
        --border-color: rgba(255, 215, 0, 0.2);
    }
    * { box-sizing: border-box; }

    body {
        margin: 0;
        font-family: 'Noto Sans KR', sans-serif;
        background: url('https://img.freepik.com/free-vector/gradient-mountain-landscape_52683-77407.jpg') no-repeat center center fixed;
        background-size: cover;
        background-color: var(--dark-bg);
        color: #fff;
        display: flex;
        justify-content: center;
        align-items: center;
        min-height: 100vh;
        padding: 20px;
    }

    .container {
        width: 100%;
        max-width: 900px;
        margin: auto;
        text-align: center;
    }

    h1 {
        font-family: 'Jua', sans-serif;
        font-size: 2.8em;
        color: var(--primary-gold);
        text-shadow: 0 0 15px var(--primary-gold), 0 0 5px #000;
        animation: glow 2s ease-in-out infinite alternate;
    }
    
    /* --- 캐릭터 선택 화면 --- */
    .character-selection-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
        gap: 30px;
        margin-top: 40px;
        padding: 20px;
    }
    .character-card {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 15px;
        padding: 20px;
        cursor: pointer;
        transition: transform 0.3s ease, box-shadow 0.3s ease;
        backdrop-filter: blur(5px);
    }
    .character-card:hover {
        transform: translateY(-10px);
        box-shadow: 0 0 30px var(--primary-gold);
    }
    .character-card .emoji { font-size: 5rem; }
    .character-card .name { font-family: 'Jua'; font-size: 1.5rem; color: var(--primary-gold); margin: 10px 0 5px; }
    .character-card .tag { font-size: 0.9rem; opacity: 0.8; }
    
    /* --- 유저 정보 입력 --- */
    .user-info-panel {
        background: var(--card-bg);
        border-radius: 15px;
        padding: 25px;
        margin-top: 40px;
        border: 1px solid var(--border-color);
        display: none; /* Initially hidden */
    }
    .user-info-panel input {
        width: 100%;
        padding: 12px;
        margin: 8px 0 16px;
        border-radius: 8px;
        border: 1px solid var(--border-color);
        background: rgba(0,0,0,0.3);
        color: #fff;
        font-size: 1rem;
    }
    label { font-weight: 700; color: var(--primary-gold); font-size: 1.1rem; }
    .btn {
        padding: 15px 20px;
        border: none;
        border-radius: 10px;
        background: linear-gradient(45deg, #DA70D6, #8A2BE2);
        color: white;
        font-family: 'Jua', sans-serif;
        font-size: 1.2rem;
        cursor: pointer;
        transition: all 0.3s ease;
        width: 100%;
    }
    .btn:hover {
        transform: scale(1.05);
        box-shadow: 0 0 20px #DA70D6;
    }

    /* --- 메인 게임 화면 --- */
    .game-screen { display: none; }
    .stats-grid {
        display: grid;
        grid-template-columns: repeat(4, 1fr);
        gap: 10px;
        margin-bottom: 20px;
    }
    .stat-item {
        background: rgba(0,0,0,0.5);
        padding: 8px;
        border-radius: 8px;
        font-size: 0.9em;
    }
    .stat-bar {
        width: 100%; background: rgba(255,255,255,0.2);
        border-radius: 5px; height: 10px; margin-top: 5px; overflow: hidden;
    }
    .stat-bar-inner {
        height: 100%;
        background: linear-gradient(90deg, #1E90FF, var(--primary-gold));
        width: 0%;
        transition: width 0.6s ease;
    }
    .game-card {
        background: var(--card-bg);
        border: 1px solid var(--border-color);
        border-radius: 20px;
        padding: 30px;
        backdrop-filter: blur(10px);
        animation: fadeIn 1s ease;
    }
    #hero-display { margin-bottom: 20px; }
    #hero-emoji { font-size: 6rem; animation: float 3s ease-in-out infinite; }
    #quest-title {
        font-family: 'Jua', sans-serif;
        font-size: 1.8rem;
        color: var(--primary-gold);
        margin: 0 0 15px;
    }
    #quest-text {
        font-size: 1.2rem;
        min-height: 80px;
        line-height: 1.6;
        border-left: 3px solid var(--primary-gold);
        padding-left: 15px;
        text-align: left;
    }
    #choices-container {
        margin-top: 25px;
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
    }
    .choice-btn {
        padding: 15px;
        font-size: 1rem;
        border: 1px solid var(--border-color);
        border-radius: 10px;
        cursor: pointer;
        background: rgba(255,255,255,0.1);
        color: #fff;
        transition: all 0.2s;
        text-align: left;
        opacity: 0;
        transform: translateY(20px);
        animation: slideUpFadeIn 0.5s forwards;
    }
    .choice-btn:hover { background: var(--primary-gold); color: #000; }
    
    /* --- 결과 화면 --- */
    .result-card { text-align: left; }
    .result-card h3 { color: var(--primary-gold); border-bottom: 2px solid var(--primary-gold); padding-bottom: 10px; }
    .result-card .career-cards { display: flex; gap: 15px; margin-top: 20px; justify-content: center; }
    .result-card .career { flex: 1; background: rgba(0,0,0,0.4); padding: 15px; border-radius: 10px; text-align: center; }

    /* --- 애니메이션 --- */
    @keyframes glow { from { text-shadow: 0 0 10px var(--primary-gold), 0 0 5px #000; } to { text-shadow: 0 0 25px var(--primary-gold), 0 0 5px #000; } }
    @keyframes float { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-15px); } }
    @keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }
    @keyframes slideUpFadeIn {
        to {
            opacity: 1;
            transform: translateY(0);
        }
    }
    
    @media(max-width: 768px) {
        h1 { font-size: 2rem; }
        .character-selection-grid { grid-template-columns: 1fr 1fr; }
        .stats-grid { grid-template-columns: 1fr 1fr; }
        #choices-container { grid-template-columns: 1fr; }
    }
</style>
</head>
<body>

<div class="container">
    <h1 id="main-title">✨ 다중지능 탐험 RPG ✨</h1>

    <div id="character-selection-screen">
        <div class="character-selection-grid">
            <div class="character-card" data-id="prince" data-emoji="🤴" data-name="용감한 왕자" data-tag="리더십 · 언어">
                <div class="emoji">🤴</div><div class="name">용감한 왕자</div><div class="tag">리더십 · 언어</div>
            </div>
            <div class="character-card" data-id="princess" data-emoji="👸" data-name="지혜로운 공주" data-tag="공감 · 음악">
                <div class="emoji">👸</div><div class="name">지혜로운 공주</div><div class="tag">공감 · 음악</div>
            </div>
            <div class="character-card" data-id="warrior" data-emoji="⚔️" data-name="강인한 전사" data-tag="신체 · 용기">
                <div class="emoji">⚔️</div><div class="name">강인한 전사</div><div class="tag">신체 · 용기</div>
            </div>
            <div class="character-card" data-id="wizard" data-emoji="🔮" data-name="신비한 마법사" data-tag="논리 · 지식">
                <div class="emoji">🔮</div><div class="name">신비한 마법사</div><div class="tag">논리 · 지식</div>
            </div>
        </div>
    </div>

    <div id="user-info-screen" class="user-info-panel">
        <h2 id="selected-char-title" style="color:var(--primary-gold);"></h2>
        <label for="input-class">반</label>
        <input id="input-class" type="text" placeholder="예: 1학년 3반" />
        <label for="input-name">이름</label>
        <input id="input-name" type="text" placeholder="예: 김민지" />
        <button id="btn-start" class="btn">▶ 모험 시작</button>
    </div>

    <div id="game-screen" class="game-screen">
        <div class="stats-grid" id="stats-grid"></div>
        <div id="game-card" class="game-card"></div>
    </div>
</div>

<script>
/* ====== 사운드: WebAudio로 간단히 생성 (외부파일 불필요) ======*/
const AudioCtx = window.AudioContext || window.webkitAudioContext;
const audioCtx = AudioCtx ? new AudioCtx() : null;
function playClick(){ if(!audioCtx) return; const o = audioCtx.createOscillator(); const g = audioCtx.createGain(); o.type='sine'; o.frequency.setValueAtTime(880, audioCtx.currentTime); g.gain.setValueAtTime(0.0001, audioCtx.currentTime); g.gain.exponentialRampToValueAtTime(0.12, audioCtx.currentTime+0.001); o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime+0.08); }
function playFanfare(){ if(!audioCtx) return; const notes=[660,880,990,1320]; let t=audioCtx.currentTime; notes.forEach((n,i)=>{ const o=audioCtx.createOscillator(); const g=audioCtx.createGain(); o.type='triangle'; o.frequency.setValueAtTime(n,t + i*0.12); g.gain.setValueAtTime(0.0001,t + i*0.12); g.gain.exponentialRampToValueAtTime(0.16,t + i*0.12 + 0.02); g.gain.exponentialRampToValueAtTime(0.0001,t + i*0.12 + 0.26); o.connect(g); g.connect(audioCtx.destination); o.start(t + i*0.12); o.stop(t + i*0.12 + 0.28); }); }
function playSuccess(){ if(!audioCtx) return; const o=audioCtx.createOscillator(); const g=audioCtx.createGain(); o.type='sawtooth'; o.frequency.setValueAtTime(440,audioCtx.currentTime); g.gain.setValueAtTime(0.0001,audioCtx.currentTime); g.gain.exponentialRampToValueAtTime(0.08,audioCtx.currentTime+0.001); o.connect(g); g.connect(audioCtx.destination); o.start(); o.stop(audioCtx.currentTime+0.12); }

/* ====== 퀘스트 데이터 (문장 수정 및 스토리 강화 버전) ====== */
function q(t,a,b,c,d){ return {text:t, options:[a,b,c,d]}; }
function opt(text,effects){ return {t:text,e:effects}; }
const quests = {
  prince: [
    q('오래된 왕실 서고, 당신은 아버지의 흔적이 담긴 낡은 편지를 발견합니다. "빛을 따라라..."라는 마지막 문장이 당신의 마음을 사로잡습니다. 가장 먼저 무엇을 하시겠습니까?',
      opt('편지에 쓰인 단어와 문장 구조를 분석해 숨겨진 의미를 찾는다.',{linguistic:14}),
      opt('편지에 남은 미세한 흙과 식물 흔적을 살펴 단서를 얻는다.',{naturalist:8,spatial:6}),
      opt('이 편지를 받을 만한 인물들을 조사해 전체적인 맥락을 파악한다.',{interpersonal:12,logical:6}),
      opt('편지에 언급된 장소로 직접 달려가 현장을 확인한다.',{bodily:12,spatial:6})
    ),
    q('시장의 한 현자가 '빛'은 북쪽 숲의 심장에 있는 고목을 의미한다고 알려줍니다. 그의 눈빛이 의미심장합니다. 이제 어떻게 행동해야 할까요?',
      opt('현자의 이야기에 온전히 귀 기울이고, 그가 아는 다른 전설은 없는지 묻는다.',{interpersonal:12,linguistic:6}),
      opt('즉시 북쪽 숲으로 말을 달려, 현자의 말이 맞는지 직접 확인한다.',{naturalist:14,spatial:6}),
      opt('다른 기록이나 지도에도 '북쪽 숲의 고목'에 대한 내용이 있는지 교차 확인한다.',{logical:12,linguistic:6}),
      opt('숲은 위험할 수 있으니, 함께할 동료들을 모아 탐험대를 꾸린다.',{bodily:12,interpersonal:6})
    ),
    q('숲으로 향하는 길목에서 고대 별자리와 닮은 문양이 새겨진 돌을 발견했습니다. 이 돌은 무엇을 의미할까요?',
      opt('별자리에 얽힌 신화를 떠올리며 문양의 상징적 의미를 해석한다.',{linguistic:12,spatial:4}),
      opt('머릿속의 밤하늘과 대조하여, 문양이 가리키는 방향을 찾아낸다.',{spatial:14}),
      opt('돌의 재질과 주변 식생을 관찰해, 이 돌이 언제부터 있었는지 추론한다.',{naturalist:12,logical:4}),
      opt('동료들에게 문양을 보여주고, 각자의 생각을 모아 함께 답을 찾는다.',{interpersonal:12})
    ),
    q('어느덧 밤이 깊어지고, 숲 속에서 규칙적인 리듬을 가진 신비한 울림이 들려옵니다. 이 소리의 정체는 무엇일까요?',
      opt('울림의 박자와 음높이를 기록하고 분석하여, 그것이 인공적인 신호인지 파악한다.',{musical:14,logical:4}),
      opt('일단 안전이 최우선. 모닥불을 피우고 밤을 보낼 안전한 야영지를 구축한다.',{bodily:12,spatial:4}),
      opt('소리의 근원지를 향해 조심스럽게 다가가, 정체를 눈으로 직접 확인한다.',{naturalist:10,spatial:6}),
      opt('낯선 소리에 불안해하는 동료들을 다독이고, 함께 불침번을 서며 밤을 지샌다.',{interpersonal:14})
    ),
    q('마침내 도착한 고목 앞에서, 글자가 거의 지워진 낡은 비문을 발견했습니다. 몇 개의 단어만이 간신히 보입니다.',
      opt('남아있는 단어들을 조합하여, 사라진 문장 전체의 의미를 유추해본다.',{linguistic:14}),
      opt('비문의 양식과 글씨체를 분석해 어느 시대에 만들어졌는지 추정한다.',{logical:10,naturalist:6}),
      opt('주변 지형을 샅샅이 뒤져, 비문과 관련된 다른 유물은 없는지 찾는다.',{spatial:12,naturalist:6}),
      opt('이 지역에 오래 살아온 주민들에게 비문에 얽힌 전설이 있는지 물어본다.',{interpersonal:12})
    ),
    q('고목의 옹이 구멍 안에서, 정교한 문양이 새겨진 작은 열쇠를 찾아냈습니다. 이 열쇠는 어디에 쓰는 물건일까요?',
      opt('열쇠의 문양을 세밀하게 스케치하고, 그 의미를 기록으로 남긴다.',{linguistic:10,spatial:8}),
      opt('일단 열쇠를 챙기고, 주변에 열쇠 구멍이 있는지 수색에 나선다.',{bodily:12}),
      opt('마을의 학자나 대장장이에게 열쇠를 보여주고, 전문적인 감정을 받아본다.',{interpersonal:12,logical:6}),
      opt('열쇠에 사용된 금속의 종류를 파악하여, 어느 지역 물건인지 추측해본다.',{naturalist:10,logical:6})
    ),
    q('모험에서 잠시 돌아온 당신. 마을의 유일한 수로가 막혀 식수가 오염되었다는 소식을 듣습니다. 무엇을 먼저 하시겠습니까?',
      opt('수로의 전체적인 구조를 파악하고, 물길을 돌릴 가장 효율적인 방법을 설계한다.',{logical:12,spatial:8}),
      opt('마을 사람들을 설득하고 조직하여, 힘을 합쳐 막힌 곳을 뚫는 작업을 지휘한다.',{interpersonal:14,bodily:6}),
      opt('오염의 원인을 찾기 위해 수로 주변의 토양과 식물을 면밀히 조사한다.',{naturalist:12}),
      opt('직접 삽을 들고 가장 힘든 작업에 뛰어들어 사람들의 사기를 북돋운다.',{bodily:14})
    ),
    q('광장의 음유시인이 노래하는 영웅담 속에서, 잃어버린 왕관에 대한 힌트를 발견합니다. 어떻게 그 정보를 얻어낼까요?',
      opt('노래 가사를 하나도 빠짐없이 받아 적고, 단어의 의미를 분석한다.',{linguistic:12,musical:6}),
      opt('음유시인과 친구가 되어, 노래에 담긴 진짜 의미와 출처를 알아낸다.',{interpersonal:12}),
      opt('가사에 묘사된 장소를 지도에 표시하여, 실제 위치를 파악한다.',{spatial:12}),
      opt('노래의 특정 멜로디가 암호일 수 있다고 생각하고, 그 음계를 분석한다.',{musical:12,logical:4})
    ),
    q('왕성에 복귀하려 하자, 국경 수비대가 당신을 알아보지 못하고 앞을 막아섭니다. 어떻게 이 상황을 해결하시겠습니까?',
      opt('나의 여정과 발견을 차분하고 논리적으로 설명하여 그들을 설득한다.',{linguistic:14,interpersonal:6}),
      opt('그들의 경계심을 이해한다고 말하며, 공감대를 형성하여 신뢰를 얻는다.',{interpersonal:16}),
      opt('내가 가진 증거물들을 제시하여, 나의 주장이 사실임을 증명한다.',{logical:12}),
      opt('그들과 언쟁하기보다, 나를 아는 다른 사람을 불러오라고 요청한다.',{linguistic:10,interpersonal:8})
    ),
    q('왕 앞에 선 당신. 왕은 "왕국의 단단한 성벽과 백성의 자유로운 웃음 중 무엇이 더 중요한가?"라는 질문을 던집니다.',
      opt('백성의 웃음이 없는 성벽은 의미가 없다며, 백성을 위한 정책을 제안한다.',{interpersonal:16,linguistic:6}),
      opt('안전이 보장되어야 행복도 존재할 수 있다며, 국방 강화 계획을 발표한다.',{logical:14,bodily:6}),
      opt('두 가치의 균형점을 찾아, 안전과 행복을 모두 지킬 수 있는 방안을 제시한다.',{logical:12,interpersonal:10}),
      opt('내면의 평화와 성찰이 진정한 행복의 시작이라며, 교육의 중요성을 강조한다.',{linguistic:12,intrapersonal:6})
    ),
    q('왕국의 폐허에서 발견된 고대 장치. 복잡한 문양과 톱니바퀴가 얽혀 있습니다. 이 장치를 어떻게 작동시킬까요?',
      opt('장치 표면의 문양과 기계의 연결 구조를 분석해 작동 원리를 파악한다.',{logical:14,spatial:6}),
      opt('일단 손으로 직접 여러 부분을 만지고 조작하며 장치의 반응을 살핀다.',{bodily:12}),
      opt('장치에서 흘러나오는 미세한 소리의 패턴을 분석하여 해답을 찾는다.',{musical:12}),
      opt('장치 주변에만 자라는 특이한 식물들을 조사하여 장치의 용도를 추측한다.',{naturalist:12})
    ),
    q('길 잃은 아이가 울며 당신에게 달려옵니다. 아이의 집을 찾아주려면 어떻게 해야 할까요?',
      opt('아이를 진정시키고, 부모님과 집에 대해 차근차근 질문하며 정보를 얻는다.',{interpersonal:14}),
      opt('아이와 함께 주변을 걸으며, 아이가 익숙한 장소를 찾을 때까지 탐색한다.',{spatial:12,bodily:6}),
      opt('아이가 사용하는 독특한 단어나 말투를 통해 어느 지역 아이인지 추측한다.',{linguistic:12,interpersonal:6}),
      opt('아이의 신발에 묻은 흙이나 옷에 붙은 씨앗을 단서로 왔던 길을 역추적한다.',{naturalist:12})
    ),
    q('왕실 회의에서 고대어로 쓰인 문서의 해석을 두고 의견이 분분합니다. 당신은 어떻게 이 문제를 해결하겠습니까?',
      opt('남아있는 문장들의 맥락을 분석하여, 가장 설득력 있는 해석을 제시한다.',{linguistic:16}),
      opt('기호와 문법의 규칙성을 찾아내, 체계적인 해석의 기준을 제안한다.',{logical:12,spatial:6}),
      opt('문서가 발견된 지역의 자연환경을 근거로, 단어의 의미를 추론한다.',{naturalist:12}),
      opt('학자들의 주장을 경청하고 중재하여, 모두가 동의하는 결론을 이끌어낸다.',{interpersonal:12})
    ),
    q('당신의 활약 덕분에 잊혔던 왕국의 축제가 부활하게 되었습니다. 어떤 축제로 만들고 싶으신가요?',
      opt('왕국의 건국 신화를 주제로 한 장엄한 연극 공연 중심의 축제',{linguistic:14}),
      opt('모두가 함께 노래하고 춤출 수 있는 음악과 춤의 축제',{musical:14}),
      opt('힘과 기술을 겨루는 박진감 넘치는 경연 대회 중심의 축제',{bodily:12,interpersonal:6}),
      opt('아름다운 자연 속에서 즐기는 캠프파이어와 별보기 축제',{naturalist:12,spatial:6})
    ),
    q('왕관이 잠들어 있다는 신전의 문. 네 개의 기념물에 각각 다른 수수께끼가 새겨져 있습니다. 어떻게 문을 여시겠습니까?',
      opt('수수께끼의 언어적 함정과 비유를 파헤쳐 정답을 외친다.',{linguistic:16}),
      opt('네 기념물의 물리적 구조와 배열을 파악해, 올바른 순서로 작동시킨다.',{logical:14,spatial:6}),
      opt('기념물들을 악기처럼 연주하여, 신전이 반응하는 화음을 찾아낸다.',{musical:14}),
      opt('기념물 주변의 동식물 반응을 관찰하여, 자연이 주는 힌트를 얻는다.',{naturalist:14})
    ),
    q('마침내 왕관을 손에 넣은 순간, 신전이 무너지기 시작합니다! 동료들과 함께 탈출해야 합니다. 어떻게 행동하시겠습니까?',
      opt('신전의 구조를 빠르게 머릿속에 그려, 가장 안전한 탈출 경로를 찾아낸다.',{spatial:14,logical:6}),
      opt('혼란에 빠진 동료들을 격려하고 이끌어, 한 명의 낙오자도 없이 탈출을 지휘한다.',{interpersonal:16}),
      opt('가장 앞장서서, 무너지는 장애물들을 민첩하게 피하며 길을 개척한다.',{bodily:14}),
      opt('몰려오는 공포를 이겨내기 위해 잠시 숨을 고르며, 침착하게 최선의 판단을 내린다.',{intrapersonal:14})
    ),
    q('왕국으로 영웅이 되어 돌아온 당신. 백성들의 기대에 부응하기 위한 첫 번째 약속은 무엇입니까?',
      opt('나의 모험을 기록한 책을 펴내, 나의 경험과 교훈을 모두와 공유하겠다.',{linguistic:14}),
      opt('무너진 도시를 재건하고, 더 살기 좋은 도시를 만들기 위한 계획을 지휘하겠다.',{logical:12,bodily:8}),
      opt('모두의 마음을 하나로 모으는 화합의 축제를 열어, 서로를 위로하게 하겠다.',{interpersonal:14,musical:6}),
      opt('왕국의 아름다운 자연을 보존하기 위한 새로운 법을 만들겠다.',{naturalist:12,spatial:6})
    ),
    q('왕위를 계승한 후, 이웃 나라와의 해묵은 영토 분쟁이 다시 시작되었습니다. 어떻게 해결하시겠습니까?',
      opt('우리의 입장을 담은 설득력 있는 외교 문서를 보내 평화 회담을 제안한다.',{linguistic:14,interpersonal:6}),
      opt('분쟁 지역의 자원 분포도를 분석하여, 양국 모두에게 이익이 되는 공동 개발을 제안한다.',{logical:14}),
      opt('상대국 지도자와 직접 만나, 격식 없는 대화를 통해 인간적인 신뢰를 쌓는다.',{interpersonal:16}),
      opt('국경 지역에서 대규모 군사 훈련을 실시하여, 우리의 강력한 의지를 보여준다.',{bodily:12})
    ),
    q('기나긴 가뭄으로 백성들이 고통받고 있습니다. 이 위기를 극복하기 위한 당신의 첫 번째 정책은 무엇입니까?',
      opt('전국적인 관개 수로 시스템을 설계하고, 가장 효율적인 물 분배 계획을 세운다.',{logical:14,spatial:8}),
      opt('가뭄에 강한 새로운 품종의 작물을 연구하고, 농업 기술을 보급한다.',{naturalist:14}),
      opt('가장 고통받는 지역을 직접 찾아가, 백성들과 함께 우물을 파며 고통을 나눈다.',{bodily:12,interpersonal:8}),
      opt('모든 백성의 의견을 수렴하는 대토론회를 열어, 가장 시급한 문제부터 해결한다.',{interpersonal:16,linguistic:6})
    ),
    q('이제 당신의 이야기는 전설이 되었습니다. 이 위대한 여정을 어떻게 마무리하고 싶으신가요?',
      opt('미래의 지도자들이 참고할 수 있도록, 나의 모든 경험을 담은 통치 기록을 집필한다.',{linguistic:16}),
      opt('나의 모험을 주제로 한 장대한 교향곡을 만들어, 예술로 나의 유산을 남긴다.',{musical:14}),
      opt('왕위에서 물러나, 나 자신을 돌아보는 조용한 성찰의 시간을 갖는다.',{intrapersonal:16}),
      opt('다음 세대를 위한 리더십 아카데미를 설립하여, 나의 경험을 직접 전수한다.',{interpersonal:12,bodily:6})
    )
  ],

  princess: [
    q('오래된 보물 상자 안에서, 어릴 적 당신이 숨겨두었던 낡은 지도를 발견합니다. "영원의 빛을 찾아서..." 여정의 첫걸음을 어떻게 떼시겠습니까?',
      opt('지도에 그려진 알 수 없는 기호와 고대 문자를 해독하는 것부터 시작한다.',{linguistic:14}),
      opt('지도에 그려진 지형이 실제와 일치하는지, 직접 성 밖을 탐사해본다.',{spatial:14}),
      opt('왕국에서 가장 나이가 많은 어르신을 찾아가, 이 지도에 얽힌 전설을 여쭙는다.',{interpersonal:12}),
      opt('지도에 그려진 식물과 동물을 단서로, 지도의 계절과 지역을 추정해본다.',{naturalist:12})
    ),
    q('고요의 정원에 들어서자, 알 수 없는 불안감이 마음을 감쌉니다. 어떻게 마음의 평화를 되찾으시겠습니까?',
      opt('가장 편안한 자세로 앉아, 깊은 호흡과 명상을 통해 내면의 목소리에 귀 기울인다.',{intrapersonal:16}),
      opt('바람에 스치는 나뭇잎 소리, 작은 새의 지저귐에 집중하며 자연의 화음을 느낀다.',{musical:14}),
      opt('정원의 전체적인 구조와 배치를 파악하며, 가장 안정감을 주는 길을 따라 걷는다.',{spatial:12,logical:6}),
      opt('정원을 관리하는 정원사와 대화를 나누며, 이곳의 이야기에 귀 기울인다.',{interpersonal:12})
    ),
    q('빛의 호수에 다다르니, 잔잔한 수면 위로 사람들의 슬픔과 기쁨이 비치는 듯합니다. 이 호수를 어떻게 건너시겠습니까?',
      opt('호숫가에 모인 사람들의 이야기를 들어주며, 그들의 마음의 짐을 덜어준다.',{interpersonal:14}),
      opt('수면에 비친 내 모습을 바라보며, 스스로의 두려움과 진실한 소망을 마주한다.',{intrapersonal:14}),
      opt('바람의 방향과 물결의 흐름을 계산하여, 가장 안전하게 건널 수 있는 경로를 찾는다.',{logical:12,spatial:6}),
      opt('주변의 튼튼한 식물 줄기를 엮어 작은 뗏목을 만들어, 자연의 힘을 빌려 건넌다.',{naturalist:14,bodily:6})
    ),
    q('별의 신전 중앙, 거대한 크리스탈이 희미한 빛만을 내뿜고 있습니다. 어떻게 찬란한 빛을 되살리시겠습니까?',
      opt('마음을 정화하는 고대의 노래를 불러, 크리스탈의 내면에 잠든 힘을 깨운다.',{musical:16,linguistic:6}),
      opt('크리스탈 표면에 새겨진 문자를 해독하여, 빛을 되살리는 정확한 주문을 외운다.',{linguistic:14,logical:6}),
      opt('나의 가장 순수한 소망을 담아, 간절한 기도로 크리스탈과 교감한다.',{intrapersonal:16,interpersonal:6}),
      opt('달빛과 별빛의 기운을 모아, 크리스탈에 자연의 에너지를 불어넣는다.',{naturalist:14})
    ),
    q('당신이 빛을 되살린 순간, 신전의 문이 굳게 닫히고 동료들과 함께 갇히고 맙니다. 어떻게 탈출하시겠습니까?',
      opt('당황한 동료들을 안심시키고, 모두의 의견을 모아 가장 합리적인 탈출 계획을 세운다.',{interpersonal:14,logical:6}),
      opt('기억을 더듬어 신전의 내부 구조를 종이에 그리고, 숨겨진 통로를 찾아낸다.',{spatial:14}),
      opt('벽에 그려진 신화 속 그림들을 단서로, 그림이 암시하는 탈출구를 유추한다.',{linguistic:12,spatial:6}),
      opt('모든 소음을 차단하고, 내면의 직감이 이끄는 방향으로 조용히 발걸음을 옮긴다.',{intrapersonal:14})
    ),
    q('마을로 돌아온 당신의 이야기를 듣기 위해 아이들이 모여들었습니다. 어떤 방식으로 당신의 경험을 들려주시겠습니까?',
      opt('모험에서 만난 신비로운 존재들에 대한 흥미진진한 옛날이야기를 들려준다.',{linguistic:14,musical:6}),
      opt('나의 감정을 담은 아름다운 자장가를 불러주며, 아이들의 마음을 편안하게 해준다.',{musical:16,interpersonal:8}),
      opt('모험의 과정을 신나는 춤과 노래로 표현하여, 아이들이 함께 즐기게 한다.',{musical:16,bodily:6}),
      opt('아이들의 눈을 바라보며, 즉흥적으로 떠오르는 선율과 이야기로 교감한다.',{musical:14,interpersonal:10})
    ),
    q('이웃 나라와의 중요한 외교 임무를 맡게 되었습니다. 어떻게 두 나라의 우정을 이끌어내시겠습니까?',
      opt('상대 나라의 문화를 존중하는 마음을 담아, 진심 어린 서신과 시를 보낸다.',{linguistic:12,interpersonal:10}),
      opt('두 나라가 함께 발전할 수 있는 공동 연구 과제를 제안하여, 실질적인 이익을 공유한다.',{logical:12,spatial:6}),
      opt('우리 왕국의 가장 아름다운 음악과 춤을 선보이는 문화 축제에 그들을 초대한다.',{musical:12,interpersonal:8}),
      opt('공식적인 회담 이전에, 상대국 대표와 차를 마시며 인간적인 유대감을 형성한다.',{interpersonal:14})
    ),
    q('어두운 동굴을 탐험하던 중, 갑작스러운 붕괴로 동료들이 위험에 처했습니다. 무엇을 가장 먼저 하시겠습니까?',
      opt('가장 안전한 대피 공간으로 동료들을 신속하게 이동시킨다.',{bodily:16,spatial:6}),
      opt('돌이 떨어지는 패턴을 분석하여, 다음 붕괴가 일어날 위치를 예측한다.',{logical:12,musical:6}),
      opt('공포에 질린 동료의 손을 잡아주고, 차분한 목소리로 격려하며 함께 나아간다.',{interpersonal:14}),
      opt('스스로의 불안을 먼저 다스리고, 가장 침착한 상태에서 상황을 지휘한다.',{intrapersonal:16})
    ),
    q('영원의 빛이 당신 앞에 여러 갈래의 길을 보여줍니다. 당신의 마음이 이끄는 길은 어느 쪽입니까?',
      opt('지도에 그려진 마지막 상징과 일치하는 길을 선택한다.',{spatial:14,linguistic:6}),
      opt('동료들의 의견을 묻고, 모두가 동의하는 길로 함께 나아간다.',{interpersonal:14}),
      opt('가장 고요하고 평화로운 기운이 느껴지는 길을, 나의 직감을 믿고 선택한다.',{intrapersonal:14}),
      opt('생명의 흔적이 가장 뚜렷하게 느껴지는, 풀과 꽃이 만발한 길을 선택한다.',{naturalist:14})
    ),
    q('마지막 관문입니다. 당신의 가장 진실한 목소리로 영원의 빛을 깨워야 합니다. 어떻게 하시겠습니까?',
      opt('왕국에 전해져 내려오는 가장 성스러운 시를 낭송하여 빛을 부른다.',{linguistic:16}),
      opt('나의 영혼을 담은 멜로디를 연주하여, 빛과 아름다운 공명을 이룬다.',{musical:16}),
      opt('나의 모든 여정과 깨달음을 담아, 진솔한 기도를 올린다.',{intrapersonal:16}),
      opt('세상의 모든 생명과 조화를 이루고 싶다는 마음으로 자연의 기운을 모은다.',{naturalist:16})
    ),
    q('마침내 당신은 영원의 빛과 하나가 되었습니다. 그 힘으로 가장 먼저 무엇을 하고 싶으신가요?',
      opt('슬픔에 잠긴 사람들의 마음을 치유하는 위로의 노래를 온 세상에 울려 퍼지게 한다.',{musical:14,interpersonal:8}),
      opt('전쟁과 욕심으로 병든 땅과 숲을, 원래의 건강한 모습으로 되살린다.',{naturalist:16}),
      opt('빛의 힘이 가진 무한한 가능성을 연구하고, 그 원리를 기록으로 남긴다.',{logical:14,linguistic:6}),
      opt('더 큰 지혜를 얻기 위해, 빛의 힘을 이용해 내면의 우주를 탐험한다.',{intrapersonal:16})
    ),
    q('왕국으로 돌아온 당신. 사람들은 당신을 '지혜의 현자'라 부르며 조언을 구합니다. 어떻게 그들을 돕겠습니까?',
      opt('한 사람 한 사람의 이야기를 끝까지 들어주고, 각자의 상황에 맞는 해답을 찾도록 돕는다.',{interpersonal:16}),
      opt('지혜가 담긴 비유와 이야기를 통해, 사람들이 스스로 깨달음을 얻도록 이끈다.',{linguistic:14}),
      opt('스스로 답을 찾는 내면의 힘을 기를 수 있도록, 명상과 성찰의 방법을 가르쳐준다.',{intrapersonal:14}),
      opt('함께 밭을 갈고 씨앗을 심으며, 자연의 순리를 통해 삶의 지혜를 배우게 한다.',{naturalist:12,interpersonal:6})
    ),
    q('당신의 명성을 시기한 일부 귀족들이 당신을 모함하기 시작했습니다. 어떻게 이 위기를 극복하시겠습니까?',
      opt('그들의 주장이 거짓임을 증명하는 명확한 증거와 논리를 담은 반박문을 발표한다.',{linguistic:12,logical:8}),
      opt('나를 모함하는 이들을 직접 찾아가, 대화를 통해 그들의 오해와 두려움을 이해하려 노력한다.',{interpersonal:16}),
      opt('외부의 비난에 흔들리지 않고, 진실은 결국 밝혀질 것이라 믿으며 나의 길을 걷는다.',{intrapersonal:14}),
      opt('모두의 마음을 감동시킬 수 있는 아름다운 음악회를 열어, 갈등을 화합으로 바꾼다.',{musical:14})
    ),
    q('전쟁으로 폐허가 된 이웃 나라를 돕기로 결심했습니다. 어떤 방식의 도움이 가장 필요하다고 생각하십니까?',
      opt('마음을 위로할 음식과 의약품, 그리고 희망을 연주할 음악가들을 보낸다.',{interpersonal:12,musical:10}),
      opt('가장 효율적인 방법으로 도시를 재건할 수 있도록, 도시 계획도를 그려서 선물한다.',{spatial:14,logical:6}),
      opt('그들의 고유한 문화를 존중하고 배우려는 의지를 담은, 진심 어린 외교 서신을 보낸다.',{linguistic:12,interpersonal:8}),
      opt('자원봉사단을 조직하여, 무너진 집을 다시 짓는 일에 직접 두 팔을 걷어붙인다.',{bodily:12,interpersonal:8})
    ),
    q('당신의 이야기는 이제吟遊詩人의 노래가 되었습니다. 당신이 어떤 사람으로 기억되기를 바라십니까?',
      opt('권위적인 통치자가 아닌, 백성들의 이야기에 귀 기울였던 따뜻한 친구.',{interpersonal:16}),
      opt('세상의 모든 갈등을 지혜롭게 중재했던 평화의 상징.',{intrapersonal:14,linguistic:6}),
      opt('아름다운 예술로 사람들의 상처를 치유했던 위대한 예술가.',{musical:14}),
      opt('자연을 누구보다 사랑하고, 모든 생명과 조화를 이루려 했던 수호자.',{naturalist:14})
    ),
    q('마을 광장에서 아이들이 사소한 문제로 다투고 있습니다. 어떻게 그들을 화해시킬까요?',
      opt('양쪽의 이야기를 공평하게 들어본 뒤, 모두가 납득할 만한 해결책을 제시한다.',{interpersonal:14,logical:6}),
      opt('아이들의 다툼을 주제로 한 즉흥 연극을 만들어, 스스로의 모습을 돌아보게 한다.',{linguistic:12,spatial:6}),
      opt('다툼은 잊고 모두가 함께 즐길 수 있는 재미있는 협동 놀이를 제안한다.',{bodily:12,interpersonal:8}),
      opt('아이들이 왜 다투게 되었는지 조용히 관찰하여, 근본적인 원인을 찾아 해결해준다.',{intrapersonal:14,naturalist:6})
    ),
    q('왕국에 이전에는 볼 수 없었던 새로운 형태의 예술이 유행하기 시작했습니다. 어떻게 반응하시겠습니까?',
      opt('새로운 예술가들을 궁전으로 초대해, 그들의 작품 세계에 대한 이야기를 직접 듣는다.',{interpersonal:14,linguistic:8}),
      opt('새로운 예술 활동을 장려하기 위한 기금을 마련하고, 지원 정책을 수립한다.',{logical:12}),
      opt('호기심을 가지고, 직접 새로운 악기를 배우거나 그림을 그리며 체험해본다.',{musical:10,bodily:8}),
      opt('이 새로운 예술이 백성들의 마음에 어떤 변화를 가져오는지 깊이 성찰해본다.',{intrapersonal:14})
    ),
    q('오랜 가뭄 끝에 드디어 단비가 내립니다. 이 감격의 순간을 어떻게 기념하시겠습니까?',
      opt('생명의 소중함을 담은 시를 지어, 비가 내리는 왕궁의 발코니에서 낭독한다.',{linguistic:14}),
      opt('빗소리를 배경 삼아, 희망을 노래하는 새로운 음악을 작곡하여 연주한다.',{musical:16}),
      opt('백성들과 함께 광장으로 나아가, 비를 맞으며 기쁨의 춤을 추는 축제를 연다.',{bodily:14,interpersonal:8}),
      opt('창가에 앉아, 대지를 적시는 비를 보며 자연의 위대함과 생명의 순환을 명상한다.',{naturalist:12,intrapersonal:8})
    ),
    q('모든 여정을 마친 지금, 당신이 얻은 가장 위대한 깨달음은 무엇입니까?',
      opt('진정한 힘이란, 다른 사람의 마음을 얻고 함께 나아가는 것임을 깨달았다.',{interpersonal:16}),
      opt('세상의 모든 것은 보이지 않는 끈으로 연결되어 있으며, 조화가 가장 중요하다는 것을 깨달았다.',{naturalist:14,intrapersonal:6}),
      opt('아름다운 예술과 음악이야말로, 세상을 치유하고 구원할 수 있는 힘임을 깨달았다.',{musical:14}),
      opt('세상의 모든 문제에 대한 해답은, 결국 내 자신의 가장 깊은 곳에 있다는 것을 깨달았다.',{intrapersonal:16})
    ),
    q('마지막으로, 당신의 지혜를 단 한 문장으로 남긴다면 어떤 말을 하시겠습니까?',
      opt('"서로의 이야기에 진심으로 귀 기울일 때, 세상의 모든 문은 열립니다."',{interpersonal:14,linguistic:8}),
      opt('"가장 깊은 침묵 속에서, 당신은 가장 위대한 지혜를 발견할 것입니다."',{intrapersonal:16}),
      opt('"세상의 모든 소리는 저마다의 의미를 가진, 단 하나뿐인 교향곡입니다."',{musical:14}),
      opt('"한 편의 진실한 시는, 때로 천 개의 칼보다 강한 힘을 가집니다."',{linguistic:16})
    )
  ],

  warrior: [
    q('당신이 수련을 마치고 돌아온 산골 마을이, 원인 모를 화마에 휩싸여 있습니다. 무엇부터 하시겠습니까?',
      opt('불길 속으로 뛰어들어, 위험에 처한 사람들을 안전한 곳으로 이끈다.',{bodily:16,interpersonal:8}),
      opt('바람의 방향과 불길이 번지는 속도를 분석해, 가장 효과적인 진압 계획을 세운다.',{logical:12}),
      opt('주변의 우물과 강물의 위치를 빠르게 파악하여, 물을 운반할 도구를 찾는다.',{spatial:12,bodily:8}),
      opt('마른 나무들을 베어내 방화선을 만들어, 불길이 더 이상 번지는 것을 막는다.',{naturalist:12,spatial:6})
    ),
    q('마을을 구하기 위해선 전설의 검이 필요합니다. 검이 잠들어 있다는 깎아지른 협곡, 어떻게 내려가시겠습니까?',
      opt('오랜 훈련으로 다져진 감각으로, 가장 안전하고 단단한 바위를 짚으며 내려간다.',{spatial:14,logical:6}),
      opt('강력한 힘으로 약한 바위를 부수고, 직접 새로운 길을 만들며 전진한다.',{bodily:16}),
      opt('돌멩이를 던져 떨어지는 소리를 듣고, 암벽의 약한 부분을 파악하며 피한다.',{musical:10,spatial:6}),
      opt('혼자보다는 함께. 동료들과 밧줄로 몸을 묶어, 서로의 안전을 확보하며 내려간다.',{interpersonal:12,logical:6})
    ),
    q('거대한 바위에 꽂힌 전설의 검. 그 앞에는 "자격 있는 자만이 나를 들리라"는 고대 문구가 새겨져 있습니다.',
      opt('우선 문구의 의미를 정확히 해독하여, 검이 말하는 '자격'이 무엇인지 알아낸다.',{linguistic:14}),
      opt('바위의 균열이나 약점을 찾아내, 최소한의 힘으로 검을 뽑을 방법을 모색한다.',{logical:12,bodily:10}),
      opt('주변의 쓰러진 나무를 이용해 지렛대를 만들어, 가장 효율적으로 검을 들어 올린다.',{spatial:14}),
      opt('검 주변에만 자라는 특이한 식물들을 보며, 검이 가진 힘의 본질을 추측한다.',{naturalist:12})
    ),
    q('검을 손에 넣은 밤, 멀리서 사나운 용의 포효가 들려옵니다. 동료들이 공포에 떨고 있습니다. 어떻게 하시겠습니까?',
      opt('내가 앞장서겠다! 동료들 앞에 서서, 어떤 위협도 막아낼 것이라며 그들을 안심시킨다.',{bodily:16,interpersonal:8}),
      opt('포효 소리의 간격과 크기를 분석하여, 용이 얼마나 멀리 있는지, 언제 접근할지 예측한다.',{musical:12,logical:6}),
      opt('주변 지형을 빠르게 스캔하여, 몸을 숨길 가장 안전한 동굴이나 바위틈을 찾는다.',{spatial:14}),
      opt('모두의 두려움을 인정하고, 각자의 역할을 정해주며 함께 위기를 극복하자고 격려한다.',{interpersonal:14})
    ),
    q('용의 둥지로 가는 길, 거대한 지하 동굴의 다리가 무너져 있습니다. 어떻게 이 위험한 협곡을 건너시겠습니까?',
      opt('강력한 도약으로 단숨에 건너편으로 뛰어넘어, 밧줄을 던져 동료들을 돕는다.',{bodily:16}),
      opt('주변에 널린 자재들을 모아, 모두가 안전하게 건널 수 있는 임시 다리를 건설한다.',{spatial:14,bodily:8}),
      opt('천장에서 떨어지는 낙석의 패턴을 분석하여, 가장 안전한 타이밍에 건넌다.',{logical:12,spatial:6}),
      opt('다른 길은 없는가? 지하수의 흐름을 따라, 더 안전한 우회로를 탐색한다.',{naturalist:12})
    ),
    q('용의 둥지 입구는 교묘한 함정들로 가득합니다. 어떻게 함정을 돌파하시겠습니까?',
      opt('함정의 작동이 의심되는 모든 것을, 나의 강력한 힘으로 파괴하며 나아간다.',{bodily:16}),
      opt('함정의 기계 장치와 구조를 파악하여, 가장 안전한 방법으로 해체한다.',{logical:14,spatial:6}),
      opt('동료들과 역할을 분담하여, 한 명은 함정을 찾고 다른 한 명은 엄호하며 나아간다.',{interpersonal:14}),
      opt('바닥의 발자국이나 공기의 미세한 흐름을 읽어, 함정이 숨겨진 위치를 찾아낸다.',{naturalist:12,logical:6})
    ),
    q('치열한 전투 중, 동료 한 명이 깊은 상처를 입고 쓰러졌습니다. 지금 당장 무엇을 해야 할까요?',
      opt('즉시 달려가 강력한 압박으로 출혈을 막고, 신속하게 응급처치를 시행한다.',{bodily:16}),
      opt('상처 주변에서 발견되는 독초나 발톱 자국으로, 상처의 원인을 파악하고 치료법을 찾는다.',{naturalist:12,logical:6}),
      opt('동료의 의식이 사라지지 않도록, 계속해서 말을 걸고 격려하며 곁을 지킨다.',{interpersonal:14}),
      opt('이번 부상을 교훈 삼아, 앞으로의 전투에서 같은 실수가 반복되지 않도록 전략을 수정한다.',{linguistic:12,logical:6})
    ),
    q('용에게 빼앗긴 왕국의 보물, '용기의 깃발'을 되찾아야 합니다. 어떤 전략으로 임하시겠습니까?',
      opt('정찰대를 조직하여 용의 동태와 둥지의 구조를 파악한 뒤, 치밀한 계획을 세운다.',{logical:14,spatial:8}),
      opt('계획은 필요 없다! 내가 직접 용의 주의를 끄는 사이, 다른 동료가 깃발을 훔쳐온다.',{bodily:16}),
      opt('지형의 이점을 최대한 활용한다. 좁은 동굴로 용을 유인하여 움직임을 봉쇄한다.',{spatial:14}),
      opt('용에게 고통받던 다른 숲속 동물들과 힘을 합쳐, 함께 용을 공격한다.',{interpersonal:12})
    ),
    q('둥지 안에서, 과거 용에게 패배했던 영웅들의 전투 기록을 발견했습니다. 이 기록에서 무엇을 얻으시겠습니까?',
      opt('기록에 묘사된 전투의 과정을 분석하여, 그들의 실패 원인과 용의 약점을 찾아낸다.',{linguistic:14,logical:6}),
      opt('기록에 그려진 지도를 바탕으로, 동굴의 숨겨진 구조와 함정의 위치를 파악한다.',{spatial:14,logical:6}),
      opt('영웅들이 용의 공격을 피할 때 사용했다는 특정한 박자를 찾아내, 전투의 리듬을 익힌다.',{musical:12}),
      opt('전투가 벌어진 현장을 직접 찾아, 당시의 흔적을 통해 전투 상황을 재구성한다.',{naturalist:10,spatial:6})
    ),
    q('마침내 잠자는 용의 심장부, 동료들의 얼굴에 긴장감이 역력합니다. 리더로서 어떻게 사기를 북돋우시겠습니까?',
      opt('나의 검을 높이 들고, 강력한 목소리와 자신감 있는 행동으로 모두의 용기를 일깨운다.',{bodily:14,interpersonal:10}),
      opt('지금까지 우리가 세운 전략을 차분히 설명하며, 우리가 이길 수밖에 없는 이유를 증명한다.',{logical:12,linguistic:6}),
      opt('동료 한 명 한 명의 어깨를 두드리며, 그들의 강점을 칭찬하고 함께 싸울 것을 맹세한다.',{interpersonal:16}),
      opt('동굴에 울려 퍼지는 자연의 소리를 이용해, 모두의 마음을 진정시키고 집중력을 높인다.',{naturalist:12,musical:6})
    ),
    q('마지막 결전의 순간, 용의 유일한 약점을 발견했습니다. 어떻게 최후의 일격을 날리시겠습니까?',
      opt('나의 모든 힘과 기술을 집중하여, 가장 정확하고 강력한 공격으로 약점을 노린다.',{bodily:16,logical:6}),
      opt('주변의 지형지물을 이용하여, 용이 약점을 스스로 드러낼 수밖에 없도록 유도한다.',{spatial:14,logical:6}),
      opt('동료들과의 완벽한 협동 플레이로, 용의 시선을 분산시키고 결정적인 순간을 만들어낸다.',{interpersonal:14}),
      opt('전투의 흐름을 완전히 내 것으로 만들고, 용이 예측할 수 없는 심리적 허점을 파고든다.',{linguistic:12,intrapersonal:6})
    ),
    q('용을 물리치고 마을로 돌아왔지만, 마을은 폐허가 되어 있습니다. 재건을 위해 가장 먼저 무엇을 하시겠습니까?',
      opt('가족과 집을 잃은 주민들의 마음을 위로하고, 그들의 안전한 거처를 마련하는 것을 돕는다.',{interpersonal:16}),
      opt('다시는 이런 비극이 없도록, 마을 주변에 강력한 방어 시설을 설계하고 건설한다.',{logical:14,bodily:6}),
      opt('주민들이 스스로를 지킬 수 있도록, 마을 청년들을 모아 훈련 프로그램을 시작한다.',{bodily:14}),
      opt('용 때문에 파괴된 숲과 강을 되살려, 마을의 장기적인 생존 기반을 다진다.',{naturalist:12,spatial:6})
    ),
    q('당신이 가진 전설의 검이 말을 걸어옵니다. "진정한 용기란 무엇인가?" 당신의 대답은 무엇입니까?',
      opt('나보다 약한 자를 위해, 기꺼이 나의 가장 강한 힘을 사용하는 것이라 답한다.',{interpersonal:16,intrapersonal:6}),
      opt('가슴 속 두려움을 인정하고, 그것을 뛰어넘어 앞으로 나아가는 행동이라 답한다.',{bodily:16}),
      opt('힘만으로는 해결할 수 없는 문제를, 지혜로 풀어내는 능력이라 답한다.',{logical:14}),
      opt('어떤 상황에서도 나 자신을 잃지 않는, 깊은 자기 신뢰라고 답한다.',{intrapersonal:16})
    ),
    q('당신의 모험은 끝났습니다. 후세에 어떤 교훈을 남기고 싶으신가요?',
      opt('망설이기보다는 행동하는 것이 세상을 바꾼다는 것을, 나의 삶으로 증명하고 싶다.',{bodily:14,linguistic:6}),
      opt('아무리 뛰어난 영웅이라도, 동료들과의 협력 없이는 승리할 수 없다는 것을 알리고 싶다.',{interpersonal:14}),
      opt('마을을 재건할 때는, 주변 자연과의 조화를 가장 먼저 생각해야 한다는 것을 가르치고 싶다.',{naturalist:14}),
      opt('힘을 앞세우기 전에, 치밀한 전략과 준비가 얼마나 중요한지 강조하고 싶다.',{logical:14})
    ),
    q('평화가 찾아온 왕국, 당신은 더 이상 전사가 아닐 수 있습니다. 남은 생을 어떻게 보내시겠습니까?',
      opt('나의 모든 기술과 경험을 전수하여, 다음 세대의 위대한 전사를 키워내는 교관이 된다.',{bodily:14,interpersonal:8}),
      opt('아직 가보지 못한 미지의 땅을 탐험하며, 왕국의 지도를 완성하는 탐험가가 된다.',{spatial:14,naturalist:6}),
      opt('치열했던 전투의 나날들을 기록으로 남겨, 전쟁의 참혹함을 알리는 역사가가 된다.',{linguistic:14}),
      opt('세상의 번잡함을 떠나, 나 자신의 한계를 넘어서기 위한 끝없는 수련의 길을 걷는다.',{intrapersonal:14,bodily:8})
    ),
    q('마을 대장장이가 당신의 검을 더욱 강력하게 만들어주겠다고 합니다. 어떤 기능을 추가하고 싶으신가요?',
      opt('더 가볍고 빠르게, 나의 움직임에 완벽하게 반응하는 검.',{bodily:16}),
      opt('상황에 따라 창이나 방패로 변형되는, 정교한 기계 장치가 달린 검.',{logical:14,spatial:6}),
      opt('왕국의 역사가 새겨져, 보는 것만으로도 위엄이 느껴지는 상징적인 검.',{linguistic:10,spatial:8}),
      opt('휘두를 때마다 바람의 노래를 연주하여, 적의 마음을 어지럽히는 검.',{musical:12})
    ),
    q('당신의 활약을 동경하는 아이들이, 당신처럼 강해지는 비결을 묻습니다. 가장 강조하고 싶은 것은 무엇입니까?',
      opt('어떤 어려움에도 꺾이지 않는, 끊임없는 훈련으로 다져진 강인한 신체.',{bodily:16}),
      opt('위기의 순간에도 냉철함을 잃지 않는, 빠르고 정확한 판단력.',{logical:14}),
      opt('혼자서는 결코 이룰 수 없는, 동료를 믿고 함께 싸우는 협동심.',{interpersonal:16}),
      opt('외부의 적보다 더 무서운, 내 안의 나약함과 싸워 이기는 정신력.',{intrapersonal:14})
    ),
    q('왕국에서 가장 험준한 '용의 등뼈' 산맥을 넘어야 합니다. 등반 성공을 위해 가장 중요한 것은 무엇일까요?',
      opt('지치지 않는 체력과, 어떤 암벽이라도 오를 수 있는 뛰어난 등반 기술.',{bodily:16,spatial:6}),
      opt('변화무쌍한 날씨를 예측하고, 눈사태의 위험을 미리 감지하는 자연에 대한 지식.',{naturalist:14,logical:6}),
      opt('반드시 정상에 오르겠다는, 스스로에 대한 믿음과 강한 동기 부여.',{intrapersonal:16}),
      opt('서로의 생명줄을 묶고, 호흡을 맞추며 위기를 함께 극복하는 팀워크.',{interpersonal:14})
    ),
    q('당신의 위대한 업적을 기리는 동상이 세워집니다. 어떤 모습으로 기억되고 싶으신가요?',
      opt('전설의 검을 높이 들고, 세상을 향해 용맹하게 포효하는 모습.',{bodily:16}),
      opt('전쟁으로 부모를 잃은 아이의 눈물을 닦아주며, 따뜻하게 안아주는 모습.',{interpersonal:14}),
      opt('지도를 펼쳐들고, 아직 가보지 않은 먼 곳을 강렬한 눈빛으로 바라보는 모습.',{spatial:14,naturalist:6}),
      opt('치열했던 전투를 모두 끝내고, 조용히 눈을 감고 명상에 잠긴 평화로운 모습.',{intrapersonal:16})
    ),
    q('모든 여정을 마친 당신, 마침내 깨닫게 된 진정한 "강함"이란 무엇입니까?',
      opt('나의 신념을 의심하지 않고, 그것을 행동으로 증명해내는 것.',{bodily:14,intrapersonal:6}),
      opt('나보다 약한 존재를 위해 나의 힘을 사용하고, 그들을 지켜주는 것.',{interpersonal:16}),
      opt('강력한 힘과 그것을 올바르게 사용하는 지혜의 균형을 이루는 것.',{logical:14}),
      opt('세상의 어떤 위협보다도, 내 안의 가장 큰 두려움을 이겨내는 것.',{intrapersonal:16})
    )
  ],

  wizard: [
    q('전설적인 지식이 잠들어 있다는 '지식의 탑'. 그 입구는 고대의 마법 퍼즐로 봉인되어 있습니다. 어떻게 문을 여시겠습니까?',
      opt('퍼즐을 이루는 기호들의 배열과 규칙성을 찾아, 수학적으로 해답을 도출한다.',{logical:16,spatial:6}),
      opt('기호 하나하나에 담긴 언어적 의미를 해석하여, 퍼즐이 말하는 문장을 완성한다.',{linguistic:14}),
      opt('퍼즐 조각을 직접 손으로 만지고 움직여보며, 물리적인 구조와 해법을 파악한다.',{bodily:10,spatial:8}),
      opt('탑 주변에만 자라는 특이한 식물들의 패턴에서, 퍼즐을 풀 자연의 힌트를 얻는다.',{naturalist:12})
    ),
    q('환영의 방에 들어서자, 당신의 가장 큰 약점이 거대한 괴물의 모습으로 나타납니다. 어떻게 이 환영을 극복하시겠습니까?',
      opt('이것은 내 안의 두려움일 뿐. 눈을 감고 명상하며, 약점을 받아들이고 극복할 답을 찾는다.',{intrapersonal:16}),
      opt('모든 환영에는 논리적 허점이 있다. 괴물의 움직임과 구조를 분석해 약점을 파고든다.',{logical:14}),
      opt('환영에게 말을 걸어, 그것이 왜 나타났는지 이해하고 대화를 통해 설득한다.',{interpersonal:12,linguistic:6}),
      opt('정교한 마법으로 환영의 본질을 분해하여, 그것을 무력화시킨다.',{logical:10,bodily:6})
    ),
    q('사방의 벽에서 각기 다른 소리가 울려 퍼지는 '소리의 미궁'에 갇혔습니다. 어떻게 탈출하시겠습니까?',
      opt('모든 소리의 멜로디와 화음을 분석하여, 미궁을 빠져나가는 '열쇠'가 되는 음을 찾아낸다.',{musical:16,logical:6}),
      opt('미로의 전체 구조를 머릿속에 지도로 그리고, 가장 빠른 탈출 경로를 시뮬레이션한다.',{spatial:14}),
      opt('벽에 손을 대고, 소리의 미세한 진동을 감지하여 진짜 문과 가짜 벽을 구분해낸다.',{naturalist:12,spatial:6}),
      opt('함께 갇힌 동료의 목소리에 집중하여, 서로의 위치를 파악하고 함께 출구를 찾는다.',{interpersonal:12})
    ),
    q('위대한 지식이 담긴 서고는 강력한 봉인 마법에 걸려 있습니다. 이 봉인을 어떻게 푸시겠습니까?',
      opt('봉인을 이루는 고대 문자를 한 자 한 자 해독하여, 해제의 주문을 알아낸다.',{linguistic:18}),
      opt('봉인의 기하학적 구조를 분석하여, 마력의 흐름이 가장 약한 부분을 공략한다.',{logical:16,spatial:6}),
      opt('봉인이 내는 고유의 파동에 맞는 소리를 내어, 공명을 통해 봉인을 중화시킨다.',{musical:14}),
      opt('봉인과 싸우기보다, 깊은 명상을 통해 나의 마력을 봉인과 조화시켜 무력화한다.',{intrapersonal:14})
    ),
    q('당신이 봉인을 푸는 순간, 지식의 무게를 이기지 못한 탑이 흔들리기 시작합니다! 어떻게 대피하시겠습니까?',
      opt('탑의 구조와 붕괴 속도를 계산하여, 모두가 탈출할 수 있는 가장 안전한 경로를 제시한다.',{logical:14,spatial:8}),
      opt('일시적으로 붕괴를 늦추는 방어 마법을 시전하여, 동료들이 탈출할 시간을 번다.',{logical:12}),
      opt('위험한 순간일수록 리더가 필요하다. 동료들을 먼저 대피시키고, 맨 마지막에 탈출한다.',{interpersonal:14,intrapersonal:6}),
      opt('탑의 붕괴가 주변 자연에 미칠 영향을 관찰하여, 가장 안전한 피신처를 찾는다.',{naturalist:12})
    ),
    q('고대 주문서를 펼쳤지만, 대부분의 단어를 알 수가 없습니다. 어떻게 이 주문을 해독하시겠습니까?',
      opt('아는 단어들을 중심으로, 문맥과 어원의 규칙을 통해 모르는 단어의 의미를 추론한다.',{linguistic:16}),
      opt('단어보다는 기호의 반복적인 패턴과 규칙을 찾아, 주문의 전체적인 구조부터 파악한다.',{logical:14}),
      opt('주문서에 함께 그려진 그림과 도표를 통해, 주문의 효과를 시각적으로 재구성한다.',{spatial:14}),
      opt('주문의 단어 하나하나에 담긴 상징적 의미를, 깊은 명상을 통해 직관적으로 해석한다.',{intrapersonal:12})
    ),
    q('서고에서 발견한 고대의 실험 장비가 갑자기 폭주하기 시작합니다. 어떻게 안정시키시겠습니까?',
      opt('장비의 작동 메커니즘을 빠르게 분석하여, 폭주를 멈출 핵심 제어장치를 찾아낸다.',{logical:14,spatial:6}),
      opt('가장 먼저 비상 정지 장치를 가동하여, 더 큰 피해가 발생하는 것을 막는다.',{bodily:12}),
      opt('폭주하는 마력의 속성을 파악하고, 그것을 중화시킬 수 있는 식물이나 광물을 찾는다.',{naturalist:12}),
      opt('혼자 해결하기보다, 동료들과 역할을 분담하여 매뉴얼에 따라 체계적으로 대응한다.',{interpersonal:12})
    ),
    q('탑 꼭대기, 미래를 예언하기 위해 밤하늘의 별을 관측해야 합니다. 어떤 방법으로 관측하시겠습니까?',
      opt('별들의 위치와 움직임을 정밀하게 기록하고, 고대의 천문 데이터와 비교 분석한다.',{logical:14,spatial:8}),
      opt('별들이 만들어내는 거대한 우주의 화음을 느끼며, 그 음악 속에서 미래의 리듬을 읽어낸다.',{musical:12}),
      opt('여러 명의 제자들과 함께, 밤하늘을 구역별로 나누어 체계적이고 효율적으로 관측한다.',{interpersonal:12}),
      opt('누구의 도움도 없이, 고요한 밤하늘과 온전히 마주하며 나만의 통찰력을 얻는다.',{intrapersonal:14})
    ),
    q('인근 마을에 원인 불명의 전염병이 돌고 있다는 소식을 들었습니다. 어떻게 이 문제를 해결하시겠습니까?',
      opt('환자들의 증상과 발병 지역의 환경을 체계적으로 기록하고 분석하여, 병의 원인을 규명한다.',{logical:14,naturalist:8}),
      opt('아픈 사람들을 돌보고, 병에 대한 공포로 혼란스러운 마을 사람들을 조직하여 질서를 유지한다.',{interpersonal:16}),
      opt('마을에 전해져 내려오는 민간요법과 나의 마법 지식을 비교하여, 가장 효과적인 치료법을 찾는다.',{linguistic:12,logical:8}),
      opt('마을 주변의 식생과 수질의 변화를 관찰하여, 병의 원인이 자연환경에 있는지 조사한다.',{naturalist:14})
    ),
    q('지식의 탐구가 끝이 없다는 사실을 깨달은 순간, 당신의 마음속에 어떤 생각이 가장 먼저 떠오릅니까?',
      opt('이 광대한 지식 앞에서 나는 아직 너무나 부족하다는 겸손한 마음.',{intrapersonal:16}),
      opt('앞으로의 연구를 위해, 지금까지의 지식을 체계적으로 정리하고 새로운 계획을 세워야겠다는 생각.',{logical:14}),
      opt('이 모든 지식을 나 혼자만 알 것이 아니라, 다른 학자들과 공유하고 토론하고 싶다는 생각.',{interpersonal:14,linguistic:6}),
      opt('잠시 연구를 멈추고, 책이 아닌 실제 자연 속에서 새로운 지혜를 찾아야겠다는 생각.',{naturalist:12})
    ),
    q('당신의 강력한 마법이 의도치 않게 폭주하여, 마을의 일부를 파괴하고 말았습니다. 어떻게 책임지시겠습니까?',
      opt('마을을 원래대로 되돌릴 수 있는 해결책을 찾기 위해, 밤을 새워 마법서를 연구한다.',{logical:16}),
      opt('피해를 입은 주민 한 명 한 명을 찾아가 진심으로 사과하고, 그들이 필요한 모든 것을 돕는다.',{interpersonal:14}),
      opt('나의 마법이 왜 폭주했는지, 내면의 불안이나 욕망을 깊이 성찰하여 원인을 찾는다.',{intrapersonal:16}),
      opt('나의 실패 과정을 상세히 기록하고 공개하여, 다른 마법사들이 같은 실수를 반복하지 않도록 한다.',{linguistic:14})
    ),
    q('오랜 연구 끝에, 세상에 없던 새로운 마법을 창조해냈습니다. 어떤 종류의 마법입니까?',
      opt('세상의 모든 언어를 실시간으로 번역하고, 거짓말을 간파하는 '진실의 마법'.',{logical:16,linguistic:6}),
      opt('듣는 이의 마음을 평화롭게 만들고, 슬픔을 치유하는 '영혼의 연주 마법'.',{musical:14,interpersonal:8}),
      opt('상상하는 모든 것을 현실에 그려내는, '꿈의 시각화 마법'.',{spatial:16}),
      opt('죽어가는 식물을 되살리고, 동물들과 소통할 수 있는 '생명의 교감 마법'.',{naturalist:14})
    ),
    q('왕국 최고의 마법사로서, 마법 학교의 교장이 되어달라는 제안을 받았습니다. 당신의 교육 철학은 무엇입니까?',
      opt('학생들이 자유롭게 질문하고 토론하며, 스스로 정답을 찾아가도록 돕는 교육.',{interpersonal:14,linguistic:8}),
      opt('마법의 근본적인 원리와 논리적 체계를 가르쳐, 안정적이고 강력한 마법사를 키우는 교육.',{logical:16}),
      opt('강력한 마법보다, 그것을 제어할 수 있는 자기 성찰과 인성을 더 중요하게 가르치는 교육.',{intrapersonal:16}),
      opt('책상에서 벗어나, 숲과 강에서 직접 마법의 재료를 찾고 체험하며 배우는 교육.',{bodily:12,naturalist:8})
    ),
    q('세상에서 가장 지혜로운 존재가 당신에게 묻습니다. "지식의 끝은 어디인가?" 어떻게 대답하시겠습니까?',
      opt('지식에는 끝이 없으며, 영원히 질문하는 과정 자체가 지식의 본질이라고 답한다.',{intrapersonal:14,linguistic:8}),
      opt('세상의 모든 지식이 결국 하나의 근원적인 법칙으로 통합될 것이라고 답한다.',{logical:16}),
      opt('지식은 다른 사람, 다른 존재와의 관계 속에서 비로소 완성되는 지혜라고 답한다.',{interpersonal:14}),
      opt('우리가 발 딛고 선 이 자연의 순환을 온전히 이해하는 것이 지식의 끝이라고 답한다.',{naturalist:14})
    ),
    q('탑을 떠나 세상으로 돌아가기 전, 후대의 마법사들을 위해 단 하나의 메시지를 남긴다면 무엇이겠습니까?',
      opt('지식은 가두어두면 죽지만, 공유하면 살아 숨 쉰다는 메시지.',{linguistic:14,interpersonal:8}),
      opt('모든 위대한 마법은 치밀한 논리와 계산 위에서 탄생한다는 메시지.',{logical:14}),
      opt('가장 위대한 스승은 책이 아닌, 우리 주변의 살아있는 자연이라는 메시지.',{naturalist:14}),
      opt('마법을 탐구하기 전에, 먼저 너 자신을 탐구하라는 메시지.',{intrapersonal:14})
    ),
    q('연구를 통해 마법으로 그림을 그리는 법을 알게 되었습니다. 당신의 첫 작품은 무엇을 그리시겠습니까?',
      opt('밤하늘 별들의 움직임을 정확하게 담아낸, 살아 움직이는 천체도.',{spatial:14,logical:8}),
      opt('마법의 원리를 누구나 쉽게 이해할 수 있도록 도표로 그린, 마법의 구조도.',{logical:16}),
      opt('나의 오랜 동료들의 행복하게 웃는 순간을 포착한, 따뜻한 초상화.',{interpersonal:14}),
      opt('고요한 명상을 통해 내 마음속에 떠오른, 평화로운 내면의 풍경화.',{intrapersonal:14})
    ),
    q('한 어린 마법사 지망생이 "가장 위대한 마법은 무엇인가요?"라고 묻습니다. 어떻게 대답해주시겠습니까?',
      opt('"세상을 바꾸는 것은 지식 그 자체가 아니라, 그것을 올바르게 사용하는 지혜란다."',{intrapersonal:14,linguistic:8}),
      opt('"가장 위대한 마법은 강력한 공격 마법이 아니라, 타인의 마음을 움직이는 공감의 마법이지."',{interpersonal:16}),
      opt('"모든 위대한 마법은, 정확한 계산과 흔들림 없는 논리 위에서 탄생한단다."',{logical:14}),
      opt('"자연의 거대한 흐름을 거스르지 않고, 그 힘을 빌리는 것이 가장 강력한 마법의 기초야."',{naturalist:14})
    ),
    q('당신은 파괴된 고대의 유물을 복원하는 임무를 맡았습니다. 무엇부터 시작하시겠습니까?',
      opt('유물 파편에 새겨진 고대어를 해독하여, 이 유물의 원래 용도와 의미부터 파악한다.',{linguistic:16}),
      opt('흩어진 수백 개의 파편들을, 머릿속에서 3차원 퍼즐처럼 맞추어 원래 형태로 조립한다.',{spatial:14,bodily:6}),
      opt('유물의 작동 원리를 분석하고, 손상된 부분을 논리적으로 재구성하여 복원한다.',{logical:16}),
      opt('이 유물을 만들었던 고대인들의 마음을 상상하며, 그들의 염원을 담아 복원 작업에 임한다.',{intrapersonal:14,interpersonal:6})
    ),
    q('당신의 뛰어난 지식을 질투한 라이벌 마법사가, 당신에게 공개적인 마법 대결을 신청했습니다. 어떻게 대응하시겠습니까?',
      opt('그의 도전을 받아들이고, 정정당당한 마법 실력으로 승부하여 격의 차이를 보여준다.',{bodily:12,logical:8}),
      opt('그가 사용하는 마법의 약점과 논리적 허점을 미리 분석하여, 대결을 압도적으로 이끈다.',{logical:16}),
      opt('대결보다는 대화를 제안. 그의 재능을 칭찬하며, 경쟁이 아닌 협력 관계를 만들자고 설득한다.',{interpersonal:14}),
      opt('그의 도발에 흔들리지 않고, 나의 연구에 더욱 집중하여 그가 따라올 수 없는 경지에 오른다.',{intrapersonal:16})
    ),
    q('세상의 모든 지식을 섭렵한 당신. 마지막으로 도전하고 싶은 궁극의 연구 분야는 무엇입니까?',
      opt('세상의 모든 언어와 생각을 하나로 통합하는, 새로운 '개념 언어'를 창조하는 연구.',{linguistic:16}),
      opt('존재하지 않는 색깔과 소리를 만들어내어, 인간의 감각을 확장시키는 '감각 창조' 마법.',{musical:14,spatial:8}),
      opt('시간의 흐름을 거스를 수 있는지, 그 근본적인 법칙을 탐구하는 '시간 마법' 연구.',{logical:16}),
      opt('모든 생명체의 의식과 연결되어, 그들의 생각과 감정을 느낄 수 있는 '만물 교감' 마법.',{naturalist:14,interpersonal:8})
    )
  ]
};

/* ====== 게임 로직 및 상태 관리 ======*/
const el = id => document.getElementById(id);

const baseScores = {linguistic:50,logical:50,spatial:50,bodily:50,musical:50,interpersonal:50,intrapersonal:50,naturalist:50};
let scores = {};
let player = { name:'', clazz:'', charId:'', emoji:'', questIndex:0 };

// 캐릭터 선택 이벤트
document.querySelectorAll('.character-card').forEach(card => {
    card.addEventListener('click', () => {
        playClick();
        player.charId = card.dataset.id;
        player.emoji = card.dataset.emoji;
        el('selected-char-title').textContent = `${player.emoji} ${card.dataset.name} 선택`;
        el('character-selection-screen').style.display = 'none';
        el('user-info-screen').style.display = 'block';
    });
});

// 게임 시작 버튼 이벤트
el('btn-start').addEventListener('click', () => {
    const name = el('input-name').value.trim();
    const clazz = el('input-class').value.trim();
    if (!name || !clazz) {
        alert('반과 이름을 모두 입력해 주세요.');
        return;
    }
    player.name = name;
    player.clazz = clazz;
    playClick();
    
    el('main-title').style.display = 'none';
    el('user-info-screen').style.display = 'none';
    el('game-screen').style.display = 'block';

    resetGame();
    renderQuest();
});

function resetGame() {
    player.questIndex = 0;
    scores = JSON.parse(JSON.stringify(baseScores));
    renderStatsUI();
}

function renderStatsUI() {
    const grid = el('stats-grid');
    grid.innerHTML = '';
    const nameMap = {linguistic:'언어',logical:'논리-수학',spatial:'공간',bodily:'신체',musical:'음악',interpersonal:'대인',intrapersonal:'자기이해',naturalist:'자연'};
    for(const key in scores) {
        grid.innerHTML += `
            <div class="stat-item">
              ${nameMap[key]}
              <div class="stat-bar"><div class="stat-bar-inner" id="bar-${key}" style="width: ${scores[key]}%"></div></div>
            </div>
        `;
    }
}

function updateStatsUI() {
    for(const key in scores) {
        el(`bar-${key}`).style.width = scores[key] + '%';
    }
}

function typeWriter(element, text, onComplete) {
    let i = 0;
    element.innerHTML = '';
    function typing() {
        if (i < text.length) {
            element.innerHTML += text.charAt(i);
            i++;
            setTimeout(typing, 30);
        } else {
            if(onComplete) onComplete();
        }
    }
    typing();
}

function renderQuest() {
    const questList = quests[player.charId];
    if (player.questIndex >= questList.length) {
        showResult();
        return;
    }
    const q = questList[player.questIndex];
    const gameCard = el('game-card');
    
    gameCard.innerHTML = `
        <div id="hero-display"><div id="hero-emoji">${player.emoji}</div></div>
        <h2 id="quest-title">Quest ${player.questIndex + 1}</h2>
        <p id="quest-text"></p>
        <div id="choices-container"></div>
    `;

    typeWriter(el('quest-text'), q.text, () => {
        const choicesContainer = el('choices-container');
        q.options.forEach((opt, i) => {
            const btn = document.createElement('button');
            btn.className = 'choice-btn';
            btn.innerHTML = `<strong>${String.fromCharCode(65+i)}.</strong> ${opt.t}`;
            btn.onclick = () => chooseOption(opt.e);
            btn.style.animationDelay = `${i * 0.1}s`;
            choicesContainer.appendChild(btn);
        });
    });
    updateStatsUI();
}

function chooseOption(effects) {
    playSuccess();
    Object.keys(effects).forEach(k => {
        if(scores[k] !== undefined) {
            scores[k] += effects[k];
            if(scores[k] > 100) scores[k] = 100;
            if(scores[k] < 0) scores[k] = 0;
        }
    });

    player.questIndex++;
    // Disable buttons to prevent multiple clicks
    const buttons = document.querySelectorAll('.choice-btn');
    buttons.forEach(button => button.disabled = true);
    
    // Slight delay before showing the next quest for smoother transition
    setTimeout(() => {
        el('game-card').style.animation = 'fadeOut 0.5s';
        setTimeout(() => {
            el('game-card').style.animation = 'fadeIn 0.5s';
            renderQuest();
        }, 500);
    }, 300);
}

function showResult() {
    playFanfare();
    const entries = Object.entries(scores).sort((a,b) => b[1] - a[1]);
    const top1 = entries[0][0];
    const top2 = entries[1][0];
    const mapNames = {linguistic:'언어 지능',logical:'논리-수학 지능',spatial:'공간 지능',bodily:'신체-운동 지능',musical:'음악 지능',interpersonal:'대인관계 지능',intrapersonal:'자기이해 지능',naturalist:'자연 지능'};
    const careerMap = {linguistic:{name:'작가·언론인',desc:'언어로 세상을 기록하고 전달합니다.',emoji:'✍️'}, logical:{name:'프로그래머·과학자',desc:'문제를 구조적으로 분석하고 해결합니다.',emoji:'🧠'}, spatial:{name:'건축가·디자이너',desc:'공간을 시각화하고 창조합니다.',emoji:'📐'}, bodily:{name:'운동선수·무용가',desc:'몸의 움직임으로 생각과 감정을 표현합니다.',emoji:'🤸'}, musical:{name:'작곡가·연주자',desc:'음악으로 사람들의 마음을 움직입니다.',emoji:'🎵'}, interpersonal:{name:'상담가·교사',desc:'사람 사이를 잇고, 성장을 돕습니다.',emoji:'🤝'}, intrapersonal:{name:'철학가·기획자',desc:'깊은 자기 통찰로 문제를 해결합니다.',emoji:'🧘'}, naturalist:{name:'생태학자·수의사',desc:'자연을 이해하고 생명을 존중합니다.',emoji:'🌳'}};

    const gameCard = el('game-card');
    gameCard.innerHTML = `
        <div class="result-card">
            <h2 style="text-align:center; font-size:1.8em; color: var(--primary-gold);">🚀 ${player.name}님의 모험 완료!</h2>
            <p style="text-align:center;">여정에서 드러난 당신의 가장 강력한 잠재력은 다음과 같습니다.</p>
            <hr style="border-color: var(--border-color); margin: 20px 0;">
            <h3>🥇 1위: ${mapNames[top1]}</h3>
            <p>${careerMap[top1].desc}</p>
            <h3>🥈 2위: ${mapNames[top2]}</h3>
            <p>${careerMap[top2].desc}</p>
            <div class="career-cards">
                <div class="career"><div style="font-size: 3rem;">${careerMap[top1].emoji}</div><h4>${careerMap[top1].name}</h4></div>
                <div class="career"><div style="font-size: 3rem;">${careerMap[top2].emoji}</div><h4>${careerMap[top2].name}</h4></div>
            </div>
            <p style="text-align:center; margin-top: 25px;">모든 지능은 소중해요. 자신의 강점을 발견하고 발전시켜 멋진 미래를 만들어가길 응원할게요!</p>
            <button class="btn" onclick="location.reload()">🔄 다시 모험하기</button>
        </div>
    `;
}

</script>
</body>
</html>
