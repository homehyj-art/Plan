<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>📜 Ancient Calling — 다중지능 탐험</title>
<link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Cinzel:wght@700&display=swap" rel="stylesheet">
<style>
:root { --brown-text:#4a3a2a; --gold:#c89a4b; }
*{box-sizing:border-box}
body{margin:0;font-family:'Gowun Dodum',serif;background:#5d4037 url('https://images.unsplash.com/photo-1520256862855-398228c41684?q=80&w=2070&auto=format&fit=crop') center/cover no-repeat fixed;color:#fff;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px;position:relative;overflow:hidden}
body:before{content:'';position:absolute;inset:0;background:rgba(0,0,0,.45)}
.wrap{position:relative;z-index:1;width:100%;max-width:1200px}
.header{text-align:center;margin-bottom:16px}
.title{font-family:'Cinzel',serif;font-size:clamp(2rem,5vw,3.25rem);color:var(--gold);text-shadow:2px 2px 8px rgba(0,0,0,.8)}
.subtitle{opacity:.95;font-size:clamp(1rem,2vw,1.1rem)}
.layout{display:flex;gap:16px}
.left{width:360px}
.right{flex:1}
.card{background:rgba(0,0,0,.6);backdrop-filter:blur(8px);border-radius:16px;padding:16px;border:1px solid rgba(255,215,102,.15);box-shadow:0 10px 30px rgba(0,0,0,.5)}
.char-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.char{padding:10px;border-radius:12px;background:rgba(0,0,0,.35);text-align:center;cursor:pointer;border:1px solid transparent;transition:.2s}
.char:hover{transform:translateY(-3px);border-color:var(--gold)}
.char.selected{background:rgba(200,154,75,.28);border-color:var(--gold);transform:translateY(-3px)}
label{display:block;color:var(--gold);font-weight:700;margin:6px 0}
input[type=text]{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,215,102,.2);background:rgba(0,0,0,.3);color:#fff;margin-bottom:8px}
.btn{display:inline-flex;gap:8px;align-items:center;justify-content:center;padding:12px 16px;border-radius:12px;border:none;cursor:pointer;background:linear-gradient(145deg,#b38645,#835e2c);color:#fff;font-weight:700;width:100%;font-size:1rem;box-shadow:0 5px 15px rgba(0,0,0,.4);transition:.2s}
.btn:hover{transform:translateY(-1px)}
.btn:disabled{background:#555;cursor:not-allowed;box-shadow:none}
#game-card{background:url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=2070&auto=format&fit=crop') center/cover no-repeat;color:var(--brown-text);padding:40px;min-height:560px;position:relative}
.quest-header{text-align:center;margin-bottom:8px}
.quest-header h3{font-family:'Cinzel',serif;color:#5b3e22;margin:0;font-size:clamp(1.1rem,2.2vw,1.4rem)}
.quest-text{font-size:clamp(1rem,2.1vw,1.2rem);line-height:1.9;min-height:116px}
.options{display:grid;grid-template-columns:1fr;gap:10px;margin-top:14px}
.option{padding:12px;border-radius:12px;background:rgba(189,168,133,.35);cursor:pointer;border:1px solid rgba(112,83,48,.3);transition:.15s;text-align:center;user-select:none}
.option:hover{transform:scale(1.02);background:rgba(189,168,133,.5)}
.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:10px;color:#fff}
.stat{background:rgba(0,0,0,.35);padding:8px;border-radius:10px;text-align:center}
.bar{height:10px;background:rgba(255,255,255,.12);border-radius:6px;margin-top:8px;overflow:hidden}
.bar-inner{height:100%;background:linear-gradient(90deg,var(--gold),#e6b873);width:0%}
.result-content{text-align:center}
@media(max-width:900px){.layout{flex-direction:column}.left{width:100%}#game-card{padding:28px}}
.spinner{display:none;border:4px solid rgba(255,255,255,.3);border-top:4px solid var(--gold);border-radius:50%;width:26px;height:26px;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.small{font-size:.9rem;opacity:.95}
</style>
</head>
<body>
<!-- 안정적인 공개 CDN 자원 사용: Mixkit(음향), Unsplash(이미지) -->
<audio id="bgm" src="https://assets.mixkit.co/music/preview/mixkit-epic-and-emotional-ambience-943.mp3" loop></audio>
<audio id="sfx-turn" src="https://assets.mixkit.co/sfx/preview/mixkit-game-click-1110.mp3"></audio>
<audio id="sfx-magic" src="https://assets.mixkit.co/sfx/preview/mixkit-magic-chime-2948.mp3"></audio>

<div class="wrap">
  <div class="header">
    <div class="title">Ancient Calling</div>
    <div class="subtitle">중1 모험가를 위한 다중지능 탐험 RPG — 모험으로 자신의 강점을 발견하세요</div>
  </div>

  <div class="layout">
    <div class="left">
      <div class="card">
        <label>모험가 이름</label>
        <input id="input-name" type="text" placeholder="예: 김민준" />
        <label>소속 (반)</label>
        <input id="input-class" type="text" placeholder="예: 1학년 3반" />
        <label>여정을 함께할 동료</label>
        <div id="char-row" class="char-row">
          <div class="char" data-id="warrior"><div class="emoji">⚔️</div><div class="name">전사</div></div>
          <div class="char" data-id="wizard"><div class="emoji">🔮</div><div class="name">마법사</div></div>
          <div class="char" data-id="archer"><div class="emoji">🏹</div><div class="name">궁수</div></div>
          <div class="char" data-id="healer"><div class="emoji">🌿</div><div class="name">치유사</div></div>
        </div>
        <div style="margin-top:16px">
          <button id="btn-start" class="btn" disabled>
            <span id="start-btn-text">▶ 모험 시작하기</span>
            <div id="start-btn-spinner" class="spinner"></div>
          </button>
          <p class="small" style="margin:10px 0 0">각 선택지는 8가지 다중지능(언어, 논리, 공간, 신체, 음악, 대인, 자기이해, 자연친화) 중 하나와 연결되어 있습니다.</p>
        </div>
      </div>

      <div id="stats-panel" class="card" style="margin-top:12px; display:none;">
          <div id="stats" class="stats-grid"></div>
      </div>
    </div>

    <div class="right">
      <div id="game-card" class="card">
        <div id="pre-game" style="text-align:center; padding-top:60px">
          <h3 style="font-family:'Cinzel',serif; color:#5b3e22">📜 모험의 서막</h3>
          <p class="small" style="color:#2e1f13;background:rgba(255,255,255,.85);display:inline-block;padding:10px 12px;border-radius:10px">이름과 반을 입력하고 동료를 선택한 뒤 시작하세요. 당신의 선택이 강점 지능을 밝힐 단서가 됩니다.</p>
        </div>

        <div id="game-area" style="display:none">
          <div class="quest-header"><h3 id="quest-title"></h3></div>
          <div id="quest-text" class="quest-text"></div>
          <div id="options" class="options"></div>
        </div>
        
        <div id="result-area" style="display:none; padding-top: 40px;">
          <div class="result-content" id="result-content"></div>
          <button id="btn-restart" class="btn" style="max-width:300px; margin: 18px auto 0;">🔄 새로운 모험 시작하기</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// ===== 사운드 & 헬퍼 =====
const S = { bgm: document.getElementById('bgm'), click: document.getElementById('sfx-turn'), magic: document.getElementById('sfx-magic') };
S.bgm.volume = 0.18;
const el = id => document.getElementById(id);

// ===== 점수 초기화 =====
const baseScores = {linguistic:50,logical:50,spatial:50,bodily:50,musical:50,interpersonal:50,intrapersonal:50,naturalist:50};
let scores = {};
let player = {name:'',clazz:'',charId:'',questIndex:0};
const NAMES = {linguistic:'언어 지능',logical:'논리-수학 지능',spatial:'공간 지능',bodily:'신체-운동 지능',musical:'음악 지능',interpersonal:'대인관계 지능',intrapersonal:'자기이해 지능',naturalist:'자연친화 지능'};

// ===== 서사 텍스트 (20단계) - 문장 톤을 더 자연스럽게 다듬음 =====
const CHAPTERS = {
  warrior: [
    ['숲의 경계','안개가 감도는 숲 가장자리에서 첫 발을 내디딘다. 숨결이 길을 알려줄 듯 고요하다.'],
    ['불씨와 바람','마을의 화롯불이 잦아들고, 이웃들의 불안이 밤공기에 실려온다.'],
    ['초원의 외침','멀리서 누군가 도움을 청하는 소리가 들린다. 발걸음을 옮겨야 할 시간이다.'],
    ['무너진 다리','골짜기의 오래된 다리가 흔들린다. 안전하게 건널 방법을 생각해야 한다.'],
    ['돌의 기억','낡은 석상 앞에서 과거의 이야기가 귓가에 속삭여진다.'],
    ['용의 숨결','동굴 속 따뜻한 숨소리가 전해온다. 용의 심장에 닿을 준비를 한다.'],
    ['성벽의 그림자','성문 앞, 긴장감이 도는 행렬이 모여 있다. 진실을 가려낼 시간이 왔다.'],
    ['전우의 맹세','동료들과의 약속이 흔들린다. 서로를 지키려면 무엇이 필요할까.'],
    ['모래의 시계','황무지의 모래가 빠르게 흘러간다. 시간은 너의 편이 아니다.'],
    ['밤의 추적','달빛 아래 남은 발자국을 따라 진실을 좇는다.'],
    ['가면의 시장','시장 속 소문과 속임수들 사이에서 단서를 찾아야 한다.'],
    ['강철의 시험','훈련장에서 오래된 의식을 마주한다. 신체와 정신 모두 시험받는다.'],
    ['숲의 심장','땅속 깊은 곳에서 생명의 맥박이 느껴진다. 귀 기울여 보자.'],
    ['메아리의 협곡','절벽 사이로 메아리가 반사되어 진실을 증폭시킨다.'],
    ['빛의 계단','구름 위로 뻗은 계단 끝에 희미한 빛이 보인다.'],
    ['고요한 전야','결전을 앞둔 밤, 동료들과 조용히 마음을 나눈다.'],
    ['격돌','어둠의 장군과 정면으로 마주한다. 모든 선택이 결과를 만든다.'],
    ['흔들림 없는 발걸음','전투가 끝난 후에도 작은 선택이 미래를 이끈다.'],
    ['왕의 인장','왕국을 위한 표식을 찾아 옳은 결정을 증명해야 한다.'],
    ['새벽의 문','해가 떠오르고, 새로운 시작의 문이 열린다.']
  ],
  wizard: [
    ['먼지의 서가','고요한 도서관의 책들이 미묘한 숨소리를 낸다. 오래된 지혜가 깨어난다.'],
    ['룬의 반짝임','바닥의 룬들이 규칙을 드러내며 작은 빛을 뿜어낸다.'],
    ['별의 잉크','천장에 흐르는 별빛이 페이지 위에 글자를 새긴다.'],
    ['수정의 균열','마력의 결정에 금이 가며 균형을 요구한다.'],
    ['환영의 문','반복되는 복도 속에서 현실과 환영의 선이 흐려진다.'],
    ['지식의 탑','계단을 오르며 잃어버린 주문의 조각을 모은다.'],
    ['거울의 질문','거울 속 자신이 다른 해답을 권한다. 마음의 소리에 귀 기울여 보자.'],
    ['시간의 매듭','흐르는 시간이 꼬여 있다. 풀어야 할 실마리가 보인다.'],
    ['깃털의 기록','작은 새가 떨어뜨린 글자가 중요한 단서를 남긴다.'],
    ['주문 공방','실패와 성공의 반복 속에서 기술을 다듬는다.'],
    ['흑서의 유혹','어두운 책이 은밀한 제안을 한다. 신중히 판단하라.'],
    ['원소의 합주','네 원소가 하나의 리듬으로 어우러질 때 답이 보인다.'],
    ['정령의 수업','정령들이 가르침을 건넨다. 수업에 집중해 보자.'],
    ['침묵의 종','울리지 않는 종의 의미를 찾는 시간이 온다.'],
    ['봉인의 열쇠','열쇠는 보이지만 봉인은 말이 없다. 방식의 차이를 생각하라.'],
    ['마력의 흐름','손끝에서 빛이 모이며 길을 만든다.'],
    ['공명의 방','생각 하나가 공명을 일으켜 많은 답을 낳는다.'],
    ['어둠의 균형','어둠을 없애기보다 조율하는 법을 배운다.'],
    ['진실의 문장','빠진 문장을 찾아 완성하면 비밀이 열릴 것이다.'],
    ['새벽의 수료','한 권의 책을 완성하듯 여정이 마무리된다.']
  ],
  archer: [
    ['바람의 길','갈대숲이 부는 방향을 따라 몸이 가벼워진다.'],
    ['매의 눈','숲 속 먼 곳에서 희미한 반짝임을 발견한다.'],
    ['흔들리는 밧줄교','발밑의 다리가 흔들리며 집중을 요구한다.'],
    ['개울의 리듬','물소리가 일정한 박자를 만들어 길을 알려준다.'],
    ['이끼의 지문','바위에 난 초록의 패턴이 길을 제시한다.'],
    ['바위의 틈','협곡 사이의 바람이 소리를 전한다. 경계를 낮추지 마라.'],
    ['고요한 숨','숨을 고르면 세상이 또렷해진다. 한 번에 한 발짝.'],
    ['사슴의 발자국','발자국을 따라 조심스럽게 발걸음을 옮긴다.'],
    ['하늘의 표적','구름 사이로 비친 빛이 과녁을 드러낸다.'],
    ['바람의 언덕','풀잎의 물결이 방향을 말해준다.'],
    ['새벽 사냥','새벽빛 속에서 기회를 포착한다.'],
    ['비밀 동굴','동굴 벽화가 옛 사냥꾼의 지혜를 전한다.'],
    ['나뭇결의 편지','나무 무늬가 숫자처럼 의미를 전달한다.'],
    ['바람의 시험','작은 깃털 하나가 정확함을 가르친다.'],
    ['강가의 반사','물 위에 비친 모습이 답을 숨기고 있다.'],
    ['새의 노래','높낮이의 변화가 길을 알려준다.'],
    ['초점','모든 잡음을 잠재우고 하나에 집중한다.'],
    ['연대의 신호','동료의 신호를 보고 함께 움직인다.'],
    ['자연의 답장','숲이 먼저 인사하며 길을 안내한다.'],
    ['귀환','활줄을 당기면 자신감이 빛난다.']
  ],
  healer: [
    ['낙엽의 속삭임','밤에 들려오는 기침 소리에 마음이 아려온다.'],
    ['샘의 노래','맑은 물소리에 길이 숨겨져 있다. 귀를 기울여 보자.'],
    ['약초의 길','향으로 이끄는 약초 더미에서 단서를 찾는다.'],
    ['손의 기억','익숙한 손길이 떨림을 가라앉힌다.'],
    ['정령의 부탁','작은 목소리가 도움을 청한다. 무엇을 먼저 할까.'],
    ['합창의 치유','마을 노래가 거리의 긴장을 풀어준다.'],
    ['마을 회의','서로 다른 목소리 속에서 진심을 읽어야 한다.'],
    ['고요의 방','숨소리 하나가 회복의 시작이 된다.'],
    ['별빛 기록','별 아래 기록한 메모가 답을 준다.'],
    ['새싹의 증언','작은 초록이 큰 변화를 말한다.'],
    ['온기의 비율','불과 물의 균형을 맞추는 일이 중요하다.'],
    ['길 위의 위로','낯선 이의 눈물을 닦아주며 연결을 느낀다.'],
    ['강의 다리','물결의 리듬이 치료의 패턴을 알려준다.'],
    ['공감의 원','둘러앉아 서로의 이야기를 듣는다.'],
    ['마지막 재료','한 가지 재료가 아직 모자라다. 어디서 찾을까.'],
    ['선택의 순간','누구를 먼저 도울지 결정해야 한다.'],
    ['이별과 감사','작별의 순간, 작은 선물이 남는다.'],
    ['회복의 장','웃음이 돌아오면 치유는 완성된다.'],
    ['기록의 마침표','오늘의 기록을 정리해 다음 이를 돕는다.'],
    ['새벽의 인사','첫 빛과 함께 새로운 날을 맞는다.']
  ]
};

// ===== 선택지 템플릿 (문장 자연스럽게 유지) =====
const TPL = {
  warrior: {
    linguistic: '📜 오래된 표식을 읽어 단서를 찾는다. (언어)',
    logical:   '🧮 상황을 논리적으로 정리해 해결책을 세운다. (논리)',
    spatial:   '🗺️ 지형을 떠올려 최적의 길을 계산한다. (공간)',
    bodily:    '⚔️ 몸으로 앞장서서 돌파한다. (신체)',
    musical:   '🥁 리듬으로 동료의 호흡을 맞춘다. (음악)',
    interpersonal:'🤝 동료와 머리를 맞대고 협력한다. (대인)',
    intrapersonal:'🧘 스스로의 마음을 다스리며 침착하게 선택한다. (자기이해)',
    naturalist:'🌿 자연의 흔적에서 실마리를 찾는다. (자연)'
  },
  wizard: {
    linguistic: '📖 고대 문장을 천천히 해독한다. (언어)',
    logical:   '🧩 룬의 규칙을 분석하여 해법을 만든다. (논리)',
    spatial:   '🔷 마법진을 시각화해 구조를 이해한다. (공간)',
    bodily:    '✋ 손의 동작으로 섬세한 마법을 건다. (신체)',
    musical:   '🎼 주문의 음계를 맞춰 공명을 유도한다. (음악)',
    interpersonal:'🗣️ 정령과 대화해 도움을 청한다. (대인)',
    intrapersonal:'🧘 자신의 내면에서 단서를 찾는다. (자기이해)',
    naturalist:'🍃 자연의 기운을 빌려 주문을 보완한다. (자연)'
  },
  archer: {
    linguistic: '📝 흔적을 기록해 흐름을 정리한다. (언어)',
    logical:   '📐 거리와 바람을 계산해 각도를 잡는다. (논리)',
    spatial:   '🎯 지형을 입체적으로 파악해 사격 위치를 정한다. (공간)',
    bodily:    '🏃 능숙한 몸놀림으로 유리한 자리로 이동한다. (신체)',
    musical:   '🎵 바람의 리듬을 타며 정확도를 높인다. (음악)',
    interpersonal:'👥 동료와 신호를 주고받아 협력한다. (대인)',
    intrapersonal:'🧘 호흡과 마음을 가다듬어 집중한다. (자기이해)',
    naturalist:'🦌 동물의 습성을 읽어 행동을 예측한다. (자연)'
  },
  healer: {
    linguistic: '✍️ 증상과 변화를 꼼꼼히 기록해 소통한다. (언어)',
    logical:   '⚖️ 원인과 결과를 정리해 처방을 마련한다. (논리)',
    spatial:   '🧭 치료 공간을 효율적으로 배치한다. (공간)',
    bodily:    '🤲 손기술로 직접 돌본다. (신체)',
    musical:   '🎶 안정감을 주는 멜로디로 마음을 다독인다. (음악)',
    interpersonal:'💬 공감의 말로 신뢰를 쌓는다. (대인)',
    intrapersonal:'🫀 자기 상태를 점검하며 균형을 유지한다. (자기이해)',
    naturalist:'🌱 약초와 자연의 힘으로 치유를 돕는다. (자연)'
  }
};

// ===== ROTATION: 20단계 동안 4선지 패턴 =====
const ROTATION = [
  ['linguistic','logical','interpersonal','bodily'],
  ['spatial','naturalist','intrapersonal','musical'],
  ['logical','spatial','bodily','interpersonal'],
  ['naturalist','linguistic','musical','intrapersonal'],
  ['bodily','spatial','logical','naturalist'],
  ['musical','interpersonal','linguistic','intrapersonal'],
  ['spatial','logical','musical','bodily'],
  ['interpersonal','intrapersonal','linguistic','naturalist'],
  ['logical','naturalist','spatial','interpersonal'],
  ['linguistic','musical','bodily','intrapersonal'],
  ['naturalist','spatial','interpersonal','logical'],
  ['musical','linguistic','intrapersonal','bodily'],
  ['spatial','naturalist','logical','linguistic'],
  ['interpersonal','musical','bodily','spatial'],
  ['intrapersonal','linguistic','naturalist','logical'],
  ['bodily','interpersonal','spatial','musical'],
  ['logical','intrapersonal','linguistic','naturalist'],
  ['spatial','bodily','musical','interpersonal'],
  ['naturalist','logical','intrapersonal','linguistic'],
  ['musical','spatial','interpersonal','bodily']
];

// ===== 빌드: 캐릭터별 20단계 퀘스트 생성 =====
function buildQuests(charId){
  const list = CHAPTERS[charId];
  return list.map((pair, idx)=>{
    const [title, text] = pair;
    const keys = ROTATION[idx];
    const options = keys.map(k=>({ t: TPL[charId][k], e: {[k]: 12} }));
    return { title, text, options };
  });
}
const quests = { warrior: buildQuests('warrior'), wizard: buildQuests('wizard'), archer: buildQuests('archer'), healer: buildQuests('healer') };

// ===== 인터랙션 및 상태관리 =====
function resetGame(){
  scores = JSON.parse(JSON.stringify(baseScores));
  player = {name:'',clazz:'',charId:'',questIndex:0};
  document.querySelectorAll('.char').forEach(c=>c.classList.remove('selected'));
  el('game-area').style.display='none';
  el('result-area').style.display='none';
  el('pre-game').style.display='block';
  el('stats-panel').style.display='none';
  el('input-name').value='';
  el('input-class').value='';
  el('start-btn-text').style.display='inline';
  el('start-btn-spinner').style.display='none';
  checkStartButton();
}
function checkStartButton(){
  const name = el('input-name').value.trim();
  const clazz = el('input-class').value.trim();
  el('btn-start').disabled = !(name && clazz && player.charId);
}

document.querySelectorAll('.char').forEach(node=>{
  node.addEventListener('click',()=>{
    document.querySelectorAll('.char').forEach(c=>c.classList.remove('selected'));
    node.classList.add('selected');
    player.charId = node.dataset.id;
    checkStartButton();
  });
});
el('input-name').addEventListener('input',checkStartButton);
el('input-class').addEventListener('input',checkStartButton);

el('btn-start').addEventListener('click',()=>{
  const name = el('input-name').value.trim();
  const clazz = el('input-class').value.trim();
  if(!(name&&clazz&&player.charId)) return;
  player.name=name; player.clazz=clazz; player.questIndex=0;
  el('start-btn-text').style.display='none'; el('start-btn-spinner').style.display='block';
  S.bgm.play().catch(()=>{});
  setTimeout(()=>{ el('pre-game').style.display='none'; el('game-area').style.display='block'; el('stats-panel').style.display='block'; renderQuest(); el('start-btn-text').style.display='inline'; el('start-btn-spinner').style.display='none'; },800);
});
el('btn-restart').addEventListener('click',resetGame);

function renderQuest(){
  const list = quests[player.charId];
  if(!list || player.questIndex >= list.length){ return showResult(); }
  const q = list[player.questIndex];
  el('quest-title').textContent = `📜 Chapter ${player.questIndex+1}: ${q.title}`;
  // 문장 출력은 자연스럽게 한 번에 넣음 (타자 효과 생략하여 가독성 향상)
  el('quest-text').textContent = q.text;
  const root = el('options'); root.innerHTML='';
  q.options.forEach((o)=>{
    const div = document.createElement('div'); div.className='option'; div.textContent = o.t;
    div.onclick = ()=>{ S.click.currentTime=0; S.click.play(); applyEffects(o.e); player.questIndex++; renderStats(); setTimeout(()=>{ S.magic.currentTime=0; S.magic.play(); renderQuest(); },220); };
    root.appendChild(div);
  });
  renderStats();
}
function applyEffects(e){ Object.keys(e).forEach(k=>{ if(scores[k]!==undefined) scores[k]+=e[k]; }); }
function renderStats(){ const root = el('stats'); root.innerHTML=''; Object.keys(scores).forEach(k=>{ const score = Math.min(100, Math.max(0, scores[k])); const box = document.createElement('div'); box.className='stat'; box.innerHTML = `<div style="font-weight:700;color:var(--gold)">${NAMES[k]}</div><div class="bar"><div class="bar-inner" style="width:${score}%"></div></div>`; root.appendChild(box); }); }

function showResult(){ el('game-area').style.display='none'; el('stats-panel').style.display='none'; el('result-area').style.display='block'; const entries = Object.entries(scores).sort((a,b)=>b[1]-a[1]); const [top1, top2, top3] = [entries[0][0], entries[1][0], entries[2][0]]; const resultHTML = `\n    <h3 style="font-family:'Cinzel',serif;color:#5b3e22">📜 모험의 결과</h3>\n    <p><strong>${player.name}</strong>(${player.clazz}) 모험가님, 20단계 여정을 마쳤습니다.</p>\n    <p>당신의 선택을 종합한 결과…</p>\n    <h4 style="color:var(--gold);margin:.4em 0">🥇 당신의 강점 지능은 <strong>${NAMES[top1]}</strong> 입니다!</h4>\n    <h4 style="color:#bca06c;margin:.2em 0">🥈 2순위: ${NAMES[top2]}</h4>\n    <h4 style="color:#a78556;margin:.2em 0">🥉 3순위: ${NAMES[top3]}</h4>\n    <p class="small" style="color:#2e1f13;background:rgba(255,255,255,.85);display:inline-block;padding:10px 12px;border-radius:10px">강점은 연습으로 더 성장합니다. 다른 캐릭터로도 모험해 결과를 비교해 보세요.</p>\n  `; el('result-content').innerHTML = resultHTML; }

// 초기화
resetGame();
</script>
</body>
</html>
