<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>ğŸ“œ Ancient Calling â€” ë‹¤ì¤‘ì§€ëŠ¥ íƒí—˜</title>
<link href="https://fonts.googleapis.com/css2?family=Gowun+Dodum&family=Cinzel:wght@700&display=swap" rel="stylesheet">
<style>
:root { --brown-text:#4a3a2a; --gold:#c89a4b; }
*{box-sizing:border-box}
body{margin:0;font-family:'Gowun Dodum',serif;background:#5d4037 url('https://images.unsplash.com/photo-1520256862855-398228c41684?q=80&w=2070&auto=format&fit=crop') center/cover no-repeat fixed;color:#fff;display:flex;align-items:center;justify-content:center;min-height:100vh;padding:20px;position:relative;overflow:hidden}
body:before{content:'';position:absolute;inset:0;background:rgba(0,0,0,.45)}
.wrap{position:relative;z-index:1;width:100%;max-width:1200px}
.header{text-align:center;margin-bottom:16px}
.title{font-family:'Cinzel',serif;font-size:clamp(2rem,5vw,3.25rem);color:var(--gold);text-shadow:2px 2px 8px rgba(0,0,0,.8)}
.subtitle{opacity:.95;font-size:clamp(1rem,2vw,1.1rem)}
.layout{display:flex;gap:16px}
.left{width:360px}
.right{flex:1}
.card{background:rgba(0,0,0,.6);backdrop-filter:blur(8px);border-radius:16px;padding:16px;border:1px solid rgba(255,215,102,.15);box-shadow:0 10px 30px rgba(0,0,0,.5)}
.char-row{display:grid;grid-template-columns:1fr 1fr;gap:10px}
.char{padding:10px;border-radius:12px;background:rgba(0,0,0,.35);text-align:center;cursor:pointer;border:1px solid transparent;transition:.2s}
.char:hover{transform:translateY(-3px);border-color:var(--gold)}
.char.selected{background:rgba(200,154,75,.28);border-color:var(--gold);transform:translateY(-3px)}
label{display:block;color:var(--gold);font-weight:700;margin:6px 0}
input[type=text]{width:100%;padding:10px;border-radius:10px;border:1px solid rgba(255,215,102,.2);background:rgba(0,0,0,.3);color:#fff;margin-bottom:8px}
.btn{display:inline-flex;gap:8px;align-items:center;justify-content:center;padding:12px 16px;border-radius:12px;border:none;cursor:pointer;background:linear-gradient(145deg,#b38645,#835e2c);color:#fff;font-weight:700;width:100%;font-size:1rem;box-shadow:0 5px 15px rgba(0,0,0,.4);transition:.2s}
.btn:hover{transform:translateY(-1px)}
.btn:disabled{background:#555;cursor:not-allowed;box-shadow:none}
#game-card{background:url('https://images.unsplash.com/photo-1500530855697-b586d89ba3ee?q=80&w=2070&auto=format&fit=crop') center/cover no-repeat;color:var(--brown-text);padding:40px;min-height:560px;position:relative}
.quest-header{text-align:center;margin-bottom:8px}
.quest-header h3{font-family:'Cinzel',serif;color:#5b3e22;margin:0;font-size:clamp(1.1rem,2.2vw,1.4rem)}
.quest-text{font-size:clamp(1rem,2.1vw,1.2rem);line-height:1.9;min-height:116px}
.options{display:grid;grid-template-columns:1fr;gap:10px;margin-top:14px}
.option{padding:12px;border-radius:12px;background:rgba(189,168,133,.35);cursor:pointer;border:1px solid rgba(112,83,48,.3);transition:.15s;text-align:center;user-select:none}
.option:hover{transform:scale(1.02);background:rgba(189,168,133,.5)}
.stats-grid{display:grid;grid-template-columns:repeat(4,1fr);gap:8px;margin-top:10px;color:#fff}
.stat{background:rgba(0,0,0,.35);padding:8px;border-radius:10px;text-align:center}
.bar{height:10px;background:rgba(255,255,255,.12);border-radius:6px;margin-top:8px;overflow:hidden}
.bar-inner{height:100%;background:linear-gradient(90deg,var(--gold),#e6b873);width:0%}
.result-content{text-align:center}
@media(max-width:900px){.layout{flex-direction:column}.left{width:100%}#game-card{padding:28px}}
.spinner{display:none;border:4px solid rgba(255,255,255,.3);border-top:4px solid var(--gold);border-radius:50%;width:26px;height:26px;animation:spin 1s linear infinite}
@keyframes spin{to{transform:rotate(360deg)}}
.small{font-size:.9rem;opacity:.95}
</style>
</head>
<body>
<!-- ì•ˆì •ì ì¸ ê³µê°œ CDN ìì› ì‚¬ìš©: Mixkit(ìŒí–¥), Unsplash(ì´ë¯¸ì§€) -->
<audio id="bgm" src="https://assets.mixkit.co/music/preview/mixkit-epic-and-emotional-ambience-943.mp3" loop></audio>
<audio id="sfx-turn" src="https://assets.mixkit.co/sfx/preview/mixkit-game-click-1110.mp3"></audio>
<audio id="sfx-magic" src="https://assets.mixkit.co/sfx/preview/mixkit-magic-chime-2948.mp3"></audio>

<div class="wrap">
  <div class="header">
    <div class="title">Ancient Calling</div>
    <div class="subtitle">ì¤‘1 ëª¨í—˜ê°€ë¥¼ ìœ„í•œ ë‹¤ì¤‘ì§€ëŠ¥ íƒí—˜ RPG â€” ëª¨í—˜ìœ¼ë¡œ ìì‹ ì˜ ê°•ì ì„ ë°œê²¬í•˜ì„¸ìš”</div>
  </div>

  <div class="layout">
    <div class="left">
      <div class="card">
        <label>ëª¨í—˜ê°€ ì´ë¦„</label>
        <input id="input-name" type="text" placeholder="ì˜ˆ: ê¹€ë¯¼ì¤€" />
        <label>ì†Œì† (ë°˜)</label>
        <input id="input-class" type="text" placeholder="ì˜ˆ: 1í•™ë…„ 3ë°˜" />
        <label>ì—¬ì •ì„ í•¨ê»˜í•  ë™ë£Œ</label>
        <div id="char-row" class="char-row">
          <div class="char" data-id="warrior"><div class="emoji">âš”ï¸</div><div class="name">ì „ì‚¬</div></div>
          <div class="char" data-id="wizard"><div class="emoji">ğŸ”®</div><div class="name">ë§ˆë²•ì‚¬</div></div>
          <div class="char" data-id="archer"><div class="emoji">ğŸ¹</div><div class="name">ê¶ìˆ˜</div></div>
          <div class="char" data-id="healer"><div class="emoji">ğŸŒ¿</div><div class="name">ì¹˜ìœ ì‚¬</div></div>
        </div>
        <div style="margin-top:16px">
          <button id="btn-start" class="btn" disabled>
            <span id="start-btn-text">â–¶ ëª¨í—˜ ì‹œì‘í•˜ê¸°</span>
            <div id="start-btn-spinner" class="spinner"></div>
          </button>
          <p class="small" style="margin:10px 0 0">ê° ì„ íƒì§€ëŠ” 8ê°€ì§€ ë‹¤ì¤‘ì§€ëŠ¥(ì–¸ì–´, ë…¼ë¦¬, ê³µê°„, ì‹ ì²´, ìŒì•…, ëŒ€ì¸, ìê¸°ì´í•´, ìì—°ì¹œí™”) ì¤‘ í•˜ë‚˜ì™€ ì—°ê²°ë˜ì–´ ìˆìŠµë‹ˆë‹¤.</p>
        </div>
      </div>

      <div id="stats-panel" class="card" style="margin-top:12px; display:none;">
          <div id="stats" class="stats-grid"></div>
      </div>
    </div>

    <div class="right">
      <div id="game-card" class="card">
        <div id="pre-game" style="text-align:center; padding-top:60px">
          <h3 style="font-family:'Cinzel',serif; color:#5b3e22">ğŸ“œ ëª¨í—˜ì˜ ì„œë§‰</h3>
          <p class="small" style="color:#2e1f13;background:rgba(255,255,255,.85);display:inline-block;padding:10px 12px;border-radius:10px">ì´ë¦„ê³¼ ë°˜ì„ ì…ë ¥í•˜ê³  ë™ë£Œë¥¼ ì„ íƒí•œ ë’¤ ì‹œì‘í•˜ì„¸ìš”. ë‹¹ì‹ ì˜ ì„ íƒì´ ê°•ì  ì§€ëŠ¥ì„ ë°í ë‹¨ì„œê°€ ë©ë‹ˆë‹¤.</p>
        </div>

        <div id="game-area" style="display:none">
          <div class="quest-header"><h3 id="quest-title"></h3></div>
          <div id="quest-text" class="quest-text"></div>
          <div id="options" class="options"></div>
        </div>
        
        <div id="result-area" style="display:none; padding-top: 40px;">
          <div class="result-content" id="result-content"></div>
          <button id="btn-restart" class="btn" style="max-width:300px; margin: 18px auto 0;">ğŸ”„ ìƒˆë¡œìš´ ëª¨í—˜ ì‹œì‘í•˜ê¸°</button>
        </div>
      </div>
    </div>
  </div>
</div>

<script>
// ===== ì‚¬ìš´ë“œ & í—¬í¼ =====
const S = { bgm: document.getElementById('bgm'), click: document.getElementById('sfx-turn'), magic: document.getElementById('sfx-magic') };
S.bgm.volume = 0.18;
const el = id => document.getElementById(id);

// ===== ì ìˆ˜ ì´ˆê¸°í™” =====
const baseScores = {linguistic:50,logical:50,spatial:50,bodily:50,musical:50,interpersonal:50,intrapersonal:50,naturalist:50};
let scores = {};
let player = {name:'',clazz:'',charId:'',questIndex:0};
const NAMES = {linguistic:'ì–¸ì–´ ì§€ëŠ¥',logical:'ë…¼ë¦¬-ìˆ˜í•™ ì§€ëŠ¥',spatial:'ê³µê°„ ì§€ëŠ¥',bodily:'ì‹ ì²´-ìš´ë™ ì§€ëŠ¥',musical:'ìŒì•… ì§€ëŠ¥',interpersonal:'ëŒ€ì¸ê´€ê³„ ì§€ëŠ¥',intrapersonal:'ìê¸°ì´í•´ ì§€ëŠ¥',naturalist:'ìì—°ì¹œí™” ì§€ëŠ¥'};

// ===== ì„œì‚¬ í…ìŠ¤íŠ¸ (20ë‹¨ê³„) - ë¬¸ì¥ í†¤ì„ ë” ìì—°ìŠ¤ëŸ½ê²Œ ë‹¤ë“¬ìŒ =====
const CHAPTERS = {
  warrior: [
    ['ìˆ²ì˜ ê²½ê³„','ì•ˆê°œê°€ ê°ë„ëŠ” ìˆ² ê°€ì¥ìë¦¬ì—ì„œ ì²« ë°œì„ ë‚´ë””ë”˜ë‹¤. ìˆ¨ê²°ì´ ê¸¸ì„ ì•Œë ¤ì¤„ ë“¯ ê³ ìš”í•˜ë‹¤.'],
    ['ë¶ˆì”¨ì™€ ë°”ëŒ','ë§ˆì„ì˜ í™”ë¡¯ë¶ˆì´ ì¦ì•„ë“¤ê³ , ì´ì›ƒë“¤ì˜ ë¶ˆì•ˆì´ ë°¤ê³µê¸°ì— ì‹¤ë ¤ì˜¨ë‹¤.'],
    ['ì´ˆì›ì˜ ì™¸ì¹¨','ë©€ë¦¬ì„œ ëˆ„êµ°ê°€ ë„ì›€ì„ ì²­í•˜ëŠ” ì†Œë¦¬ê°€ ë“¤ë¦°ë‹¤. ë°œê±¸ìŒì„ ì˜®ê²¨ì•¼ í•  ì‹œê°„ì´ë‹¤.'],
    ['ë¬´ë„ˆì§„ ë‹¤ë¦¬','ê³¨ì§œê¸°ì˜ ì˜¤ë˜ëœ ë‹¤ë¦¬ê°€ í”ë“¤ë¦°ë‹¤. ì•ˆì „í•˜ê²Œ ê±´ë„ ë°©ë²•ì„ ìƒê°í•´ì•¼ í•œë‹¤.'],
    ['ëŒì˜ ê¸°ì–µ','ë‚¡ì€ ì„ìƒ ì•ì—ì„œ ê³¼ê±°ì˜ ì´ì•¼ê¸°ê°€ ê·“ê°€ì— ì†ì‚­ì—¬ì§„ë‹¤.'],
    ['ìš©ì˜ ìˆ¨ê²°','ë™êµ´ ì† ë”°ëœ»í•œ ìˆ¨ì†Œë¦¬ê°€ ì „í•´ì˜¨ë‹¤. ìš©ì˜ ì‹¬ì¥ì— ë‹¿ì„ ì¤€ë¹„ë¥¼ í•œë‹¤.'],
    ['ì„±ë²½ì˜ ê·¸ë¦¼ì','ì„±ë¬¸ ì•, ê¸´ì¥ê°ì´ ë„ëŠ” í–‰ë ¬ì´ ëª¨ì—¬ ìˆë‹¤. ì§„ì‹¤ì„ ê°€ë ¤ë‚¼ ì‹œê°„ì´ ì™”ë‹¤.'],
    ['ì „ìš°ì˜ ë§¹ì„¸','ë™ë£Œë“¤ê³¼ì˜ ì•½ì†ì´ í”ë“¤ë¦°ë‹¤. ì„œë¡œë¥¼ ì§€í‚¤ë ¤ë©´ ë¬´ì—‡ì´ í•„ìš”í• ê¹Œ.'],
    ['ëª¨ë˜ì˜ ì‹œê³„','í™©ë¬´ì§€ì˜ ëª¨ë˜ê°€ ë¹ ë¥´ê²Œ í˜ëŸ¬ê°„ë‹¤. ì‹œê°„ì€ ë„ˆì˜ í¸ì´ ì•„ë‹ˆë‹¤.'],
    ['ë°¤ì˜ ì¶”ì ','ë‹¬ë¹› ì•„ë˜ ë‚¨ì€ ë°œìêµ­ì„ ë”°ë¼ ì§„ì‹¤ì„ ì¢‡ëŠ”ë‹¤.'],
    ['ê°€ë©´ì˜ ì‹œì¥','ì‹œì¥ ì† ì†Œë¬¸ê³¼ ì†ì„ìˆ˜ë“¤ ì‚¬ì´ì—ì„œ ë‹¨ì„œë¥¼ ì°¾ì•„ì•¼ í•œë‹¤.'],
    ['ê°•ì² ì˜ ì‹œí—˜','í›ˆë ¨ì¥ì—ì„œ ì˜¤ë˜ëœ ì˜ì‹ì„ ë§ˆì£¼í•œë‹¤. ì‹ ì²´ì™€ ì •ì‹  ëª¨ë‘ ì‹œí—˜ë°›ëŠ”ë‹¤.'],
    ['ìˆ²ì˜ ì‹¬ì¥','ë•…ì† ê¹Šì€ ê³³ì—ì„œ ìƒëª…ì˜ ë§¥ë°•ì´ ëŠê»´ì§„ë‹¤. ê·€ ê¸°ìš¸ì—¬ ë³´ì.'],
    ['ë©”ì•„ë¦¬ì˜ í˜‘ê³¡','ì ˆë²½ ì‚¬ì´ë¡œ ë©”ì•„ë¦¬ê°€ ë°˜ì‚¬ë˜ì–´ ì§„ì‹¤ì„ ì¦í­ì‹œí‚¨ë‹¤.'],
    ['ë¹›ì˜ ê³„ë‹¨','êµ¬ë¦„ ìœ„ë¡œ ë»—ì€ ê³„ë‹¨ ëì— í¬ë¯¸í•œ ë¹›ì´ ë³´ì¸ë‹¤.'],
    ['ê³ ìš”í•œ ì „ì•¼','ê²°ì „ì„ ì•ë‘” ë°¤, ë™ë£Œë“¤ê³¼ ì¡°ìš©íˆ ë§ˆìŒì„ ë‚˜ëˆˆë‹¤.'],
    ['ê²©ëŒ','ì–´ë‘ ì˜ ì¥êµ°ê³¼ ì •ë©´ìœ¼ë¡œ ë§ˆì£¼í•œë‹¤. ëª¨ë“  ì„ íƒì´ ê²°ê³¼ë¥¼ ë§Œë“ ë‹¤.'],
    ['í”ë“¤ë¦¼ ì—†ëŠ” ë°œê±¸ìŒ','ì „íˆ¬ê°€ ëë‚œ í›„ì—ë„ ì‘ì€ ì„ íƒì´ ë¯¸ë˜ë¥¼ ì´ëˆë‹¤.'],
    ['ì™•ì˜ ì¸ì¥','ì™•êµ­ì„ ìœ„í•œ í‘œì‹ì„ ì°¾ì•„ ì˜³ì€ ê²°ì •ì„ ì¦ëª…í•´ì•¼ í•œë‹¤.'],
    ['ìƒˆë²½ì˜ ë¬¸','í•´ê°€ ë– ì˜¤ë¥´ê³ , ìƒˆë¡œìš´ ì‹œì‘ì˜ ë¬¸ì´ ì—´ë¦°ë‹¤.']
  ],
  wizard: [
    ['ë¨¼ì§€ì˜ ì„œê°€','ê³ ìš”í•œ ë„ì„œê´€ì˜ ì±…ë“¤ì´ ë¯¸ë¬˜í•œ ìˆ¨ì†Œë¦¬ë¥¼ ë‚¸ë‹¤. ì˜¤ë˜ëœ ì§€í˜œê°€ ê¹¨ì–´ë‚œë‹¤.'],
    ['ë£¬ì˜ ë°˜ì§ì„','ë°”ë‹¥ì˜ ë£¬ë“¤ì´ ê·œì¹™ì„ ë“œëŸ¬ë‚´ë©° ì‘ì€ ë¹›ì„ ë¿œì–´ë‚¸ë‹¤.'],
    ['ë³„ì˜ ì‰í¬','ì²œì¥ì— íë¥´ëŠ” ë³„ë¹›ì´ í˜ì´ì§€ ìœ„ì— ê¸€ìë¥¼ ìƒˆê¸´ë‹¤.'],
    ['ìˆ˜ì •ì˜ ê· ì—´','ë§ˆë ¥ì˜ ê²°ì •ì— ê¸ˆì´ ê°€ë©° ê· í˜•ì„ ìš”êµ¬í•œë‹¤.'],
    ['í™˜ì˜ì˜ ë¬¸','ë°˜ë³µë˜ëŠ” ë³µë„ ì†ì—ì„œ í˜„ì‹¤ê³¼ í™˜ì˜ì˜ ì„ ì´ íë ¤ì§„ë‹¤.'],
    ['ì§€ì‹ì˜ íƒ‘','ê³„ë‹¨ì„ ì˜¤ë¥´ë©° ìƒì–´ë²„ë¦° ì£¼ë¬¸ì˜ ì¡°ê°ì„ ëª¨ì€ë‹¤.'],
    ['ê±°ìš¸ì˜ ì§ˆë¬¸','ê±°ìš¸ ì† ìì‹ ì´ ë‹¤ë¥¸ í•´ë‹µì„ ê¶Œí•œë‹¤. ë§ˆìŒì˜ ì†Œë¦¬ì— ê·€ ê¸°ìš¸ì—¬ ë³´ì.'],
    ['ì‹œê°„ì˜ ë§¤ë“­','íë¥´ëŠ” ì‹œê°„ì´ ê¼¬ì—¬ ìˆë‹¤. í’€ì–´ì•¼ í•  ì‹¤ë§ˆë¦¬ê°€ ë³´ì¸ë‹¤.'],
    ['ê¹ƒí„¸ì˜ ê¸°ë¡','ì‘ì€ ìƒˆê°€ ë–¨ì–´ëœ¨ë¦° ê¸€ìê°€ ì¤‘ìš”í•œ ë‹¨ì„œë¥¼ ë‚¨ê¸´ë‹¤.'],
    ['ì£¼ë¬¸ ê³µë°©','ì‹¤íŒ¨ì™€ ì„±ê³µì˜ ë°˜ë³µ ì†ì—ì„œ ê¸°ìˆ ì„ ë‹¤ë“¬ëŠ”ë‹¤.'],
    ['í‘ì„œì˜ ìœ í˜¹','ì–´ë‘ìš´ ì±…ì´ ì€ë°€í•œ ì œì•ˆì„ í•œë‹¤. ì‹ ì¤‘íˆ íŒë‹¨í•˜ë¼.'],
    ['ì›ì†Œì˜ í•©ì£¼','ë„¤ ì›ì†Œê°€ í•˜ë‚˜ì˜ ë¦¬ë“¬ìœ¼ë¡œ ì–´ìš°ëŸ¬ì§ˆ ë•Œ ë‹µì´ ë³´ì¸ë‹¤.'],
    ['ì •ë ¹ì˜ ìˆ˜ì—…','ì •ë ¹ë“¤ì´ ê°€ë¥´ì¹¨ì„ ê±´ë„¨ë‹¤. ìˆ˜ì—…ì— ì§‘ì¤‘í•´ ë³´ì.'],
    ['ì¹¨ë¬µì˜ ì¢…','ìš¸ë¦¬ì§€ ì•ŠëŠ” ì¢…ì˜ ì˜ë¯¸ë¥¼ ì°¾ëŠ” ì‹œê°„ì´ ì˜¨ë‹¤.'],
    ['ë´‰ì¸ì˜ ì—´ì‡ ','ì—´ì‡ ëŠ” ë³´ì´ì§€ë§Œ ë´‰ì¸ì€ ë§ì´ ì—†ë‹¤. ë°©ì‹ì˜ ì°¨ì´ë¥¼ ìƒê°í•˜ë¼.'],
    ['ë§ˆë ¥ì˜ íë¦„','ì†ëì—ì„œ ë¹›ì´ ëª¨ì´ë©° ê¸¸ì„ ë§Œë“ ë‹¤.'],
    ['ê³µëª…ì˜ ë°©','ìƒê° í•˜ë‚˜ê°€ ê³µëª…ì„ ì¼ìœ¼ì¼œ ë§ì€ ë‹µì„ ë‚³ëŠ”ë‹¤.'],
    ['ì–´ë‘ ì˜ ê· í˜•','ì–´ë‘ ì„ ì—†ì• ê¸°ë³´ë‹¤ ì¡°ìœ¨í•˜ëŠ” ë²•ì„ ë°°ìš´ë‹¤.'],
    ['ì§„ì‹¤ì˜ ë¬¸ì¥','ë¹ ì§„ ë¬¸ì¥ì„ ì°¾ì•„ ì™„ì„±í•˜ë©´ ë¹„ë°€ì´ ì—´ë¦´ ê²ƒì´ë‹¤.'],
    ['ìƒˆë²½ì˜ ìˆ˜ë£Œ','í•œ ê¶Œì˜ ì±…ì„ ì™„ì„±í•˜ë“¯ ì—¬ì •ì´ ë§ˆë¬´ë¦¬ëœë‹¤.']
  ],
  archer: [
    ['ë°”ëŒì˜ ê¸¸','ê°ˆëŒ€ìˆ²ì´ ë¶€ëŠ” ë°©í–¥ì„ ë”°ë¼ ëª¸ì´ ê°€ë²¼ì›Œì§„ë‹¤.'],
    ['ë§¤ì˜ ëˆˆ','ìˆ² ì† ë¨¼ ê³³ì—ì„œ í¬ë¯¸í•œ ë°˜ì§ì„ì„ ë°œê²¬í•œë‹¤.'],
    ['í”ë“¤ë¦¬ëŠ” ë°§ì¤„êµ','ë°œë°‘ì˜ ë‹¤ë¦¬ê°€ í”ë“¤ë¦¬ë©° ì§‘ì¤‘ì„ ìš”êµ¬í•œë‹¤.'],
    ['ê°œìš¸ì˜ ë¦¬ë“¬','ë¬¼ì†Œë¦¬ê°€ ì¼ì •í•œ ë°•ìë¥¼ ë§Œë“¤ì–´ ê¸¸ì„ ì•Œë ¤ì¤€ë‹¤.'],
    ['ì´ë¼ì˜ ì§€ë¬¸','ë°”ìœ„ì— ë‚œ ì´ˆë¡ì˜ íŒ¨í„´ì´ ê¸¸ì„ ì œì‹œí•œë‹¤.'],
    ['ë°”ìœ„ì˜ í‹ˆ','í˜‘ê³¡ ì‚¬ì´ì˜ ë°”ëŒì´ ì†Œë¦¬ë¥¼ ì „í•œë‹¤. ê²½ê³„ë¥¼ ë‚®ì¶”ì§€ ë§ˆë¼.'],
    ['ê³ ìš”í•œ ìˆ¨','ìˆ¨ì„ ê³ ë¥´ë©´ ì„¸ìƒì´ ë˜ë ·í•´ì§„ë‹¤. í•œ ë²ˆì— í•œ ë°œì§.'],
    ['ì‚¬ìŠ´ì˜ ë°œìêµ­','ë°œìêµ­ì„ ë”°ë¼ ì¡°ì‹¬ìŠ¤ëŸ½ê²Œ ë°œê±¸ìŒì„ ì˜®ê¸´ë‹¤.'],
    ['í•˜ëŠ˜ì˜ í‘œì ','êµ¬ë¦„ ì‚¬ì´ë¡œ ë¹„ì¹œ ë¹›ì´ ê³¼ë…ì„ ë“œëŸ¬ë‚¸ë‹¤.'],
    ['ë°”ëŒì˜ ì–¸ë•','í’€ìì˜ ë¬¼ê²°ì´ ë°©í–¥ì„ ë§í•´ì¤€ë‹¤.'],
    ['ìƒˆë²½ ì‚¬ëƒ¥','ìƒˆë²½ë¹› ì†ì—ì„œ ê¸°íšŒë¥¼ í¬ì°©í•œë‹¤.'],
    ['ë¹„ë°€ ë™êµ´','ë™êµ´ ë²½í™”ê°€ ì˜› ì‚¬ëƒ¥ê¾¼ì˜ ì§€í˜œë¥¼ ì „í•œë‹¤.'],
    ['ë‚˜ë­‡ê²°ì˜ í¸ì§€','ë‚˜ë¬´ ë¬´ëŠ¬ê°€ ìˆ«ìì²˜ëŸ¼ ì˜ë¯¸ë¥¼ ì „ë‹¬í•œë‹¤.'],
    ['ë°”ëŒì˜ ì‹œí—˜','ì‘ì€ ê¹ƒí„¸ í•˜ë‚˜ê°€ ì •í™•í•¨ì„ ê°€ë¥´ì¹œë‹¤.'],
    ['ê°•ê°€ì˜ ë°˜ì‚¬','ë¬¼ ìœ„ì— ë¹„ì¹œ ëª¨ìŠµì´ ë‹µì„ ìˆ¨ê¸°ê³  ìˆë‹¤.'],
    ['ìƒˆì˜ ë…¸ë˜','ë†’ë‚®ì´ì˜ ë³€í™”ê°€ ê¸¸ì„ ì•Œë ¤ì¤€ë‹¤.'],
    ['ì´ˆì ','ëª¨ë“  ì¡ìŒì„ ì ì¬ìš°ê³  í•˜ë‚˜ì— ì§‘ì¤‘í•œë‹¤.'],
    ['ì—°ëŒ€ì˜ ì‹ í˜¸','ë™ë£Œì˜ ì‹ í˜¸ë¥¼ ë³´ê³  í•¨ê»˜ ì›€ì§ì¸ë‹¤.'],
    ['ìì—°ì˜ ë‹µì¥','ìˆ²ì´ ë¨¼ì € ì¸ì‚¬í•˜ë©° ê¸¸ì„ ì•ˆë‚´í•œë‹¤.'],
    ['ê·€í™˜','í™œì¤„ì„ ë‹¹ê¸°ë©´ ìì‹ ê°ì´ ë¹›ë‚œë‹¤.']
  ],
  healer: [
    ['ë‚™ì—½ì˜ ì†ì‚­ì„','ë°¤ì— ë“¤ë ¤ì˜¤ëŠ” ê¸°ì¹¨ ì†Œë¦¬ì— ë§ˆìŒì´ ì•„ë ¤ì˜¨ë‹¤.'],
    ['ìƒ˜ì˜ ë…¸ë˜','ë§‘ì€ ë¬¼ì†Œë¦¬ì— ê¸¸ì´ ìˆ¨ê²¨ì ¸ ìˆë‹¤. ê·€ë¥¼ ê¸°ìš¸ì—¬ ë³´ì.'],
    ['ì•½ì´ˆì˜ ê¸¸','í–¥ìœ¼ë¡œ ì´ë„ëŠ” ì•½ì´ˆ ë”ë¯¸ì—ì„œ ë‹¨ì„œë¥¼ ì°¾ëŠ”ë‹¤.'],
    ['ì†ì˜ ê¸°ì–µ','ìµìˆ™í•œ ì†ê¸¸ì´ ë–¨ë¦¼ì„ ê°€ë¼ì•‰íŒë‹¤.'],
    ['ì •ë ¹ì˜ ë¶€íƒ','ì‘ì€ ëª©ì†Œë¦¬ê°€ ë„ì›€ì„ ì²­í•œë‹¤. ë¬´ì—‡ì„ ë¨¼ì € í• ê¹Œ.'],
    ['í•©ì°½ì˜ ì¹˜ìœ ','ë§ˆì„ ë…¸ë˜ê°€ ê±°ë¦¬ì˜ ê¸´ì¥ì„ í’€ì–´ì¤€ë‹¤.'],
    ['ë§ˆì„ íšŒì˜','ì„œë¡œ ë‹¤ë¥¸ ëª©ì†Œë¦¬ ì†ì—ì„œ ì§„ì‹¬ì„ ì½ì–´ì•¼ í•œë‹¤.'],
    ['ê³ ìš”ì˜ ë°©','ìˆ¨ì†Œë¦¬ í•˜ë‚˜ê°€ íšŒë³µì˜ ì‹œì‘ì´ ëœë‹¤.'],
    ['ë³„ë¹› ê¸°ë¡','ë³„ ì•„ë˜ ê¸°ë¡í•œ ë©”ëª¨ê°€ ë‹µì„ ì¤€ë‹¤.'],
    ['ìƒˆì‹¹ì˜ ì¦ì–¸','ì‘ì€ ì´ˆë¡ì´ í° ë³€í™”ë¥¼ ë§í•œë‹¤.'],
    ['ì˜¨ê¸°ì˜ ë¹„ìœ¨','ë¶ˆê³¼ ë¬¼ì˜ ê· í˜•ì„ ë§ì¶”ëŠ” ì¼ì´ ì¤‘ìš”í•˜ë‹¤.'],
    ['ê¸¸ ìœ„ì˜ ìœ„ë¡œ','ë‚¯ì„  ì´ì˜ ëˆˆë¬¼ì„ ë‹¦ì•„ì£¼ë©° ì—°ê²°ì„ ëŠë‚€ë‹¤.'],
    ['ê°•ì˜ ë‹¤ë¦¬','ë¬¼ê²°ì˜ ë¦¬ë“¬ì´ ì¹˜ë£Œì˜ íŒ¨í„´ì„ ì•Œë ¤ì¤€ë‹¤.'],
    ['ê³µê°ì˜ ì›','ë‘˜ëŸ¬ì•‰ì•„ ì„œë¡œì˜ ì´ì•¼ê¸°ë¥¼ ë“£ëŠ”ë‹¤.'],
    ['ë§ˆì§€ë§‰ ì¬ë£Œ','í•œ ê°€ì§€ ì¬ë£Œê°€ ì•„ì§ ëª¨ìë¼ë‹¤. ì–´ë””ì„œ ì°¾ì„ê¹Œ.'],
    ['ì„ íƒì˜ ìˆœê°„','ëˆ„êµ¬ë¥¼ ë¨¼ì € ë„ìš¸ì§€ ê²°ì •í•´ì•¼ í•œë‹¤.'],
    ['ì´ë³„ê³¼ ê°ì‚¬','ì‘ë³„ì˜ ìˆœê°„, ì‘ì€ ì„ ë¬¼ì´ ë‚¨ëŠ”ë‹¤.'],
    ['íšŒë³µì˜ ì¥','ì›ƒìŒì´ ëŒì•„ì˜¤ë©´ ì¹˜ìœ ëŠ” ì™„ì„±ëœë‹¤.'],
    ['ê¸°ë¡ì˜ ë§ˆì¹¨í‘œ','ì˜¤ëŠ˜ì˜ ê¸°ë¡ì„ ì •ë¦¬í•´ ë‹¤ìŒ ì´ë¥¼ ë•ëŠ”ë‹¤.'],
    ['ìƒˆë²½ì˜ ì¸ì‚¬','ì²« ë¹›ê³¼ í•¨ê»˜ ìƒˆë¡œìš´ ë‚ ì„ ë§ëŠ”ë‹¤.']
  ]
};

// ===== ì„ íƒì§€ í…œí”Œë¦¿ (ë¬¸ì¥ ìì—°ìŠ¤ëŸ½ê²Œ ìœ ì§€) =====
const TPL = {
  warrior: {
    linguistic: 'ğŸ“œ ì˜¤ë˜ëœ í‘œì‹ì„ ì½ì–´ ë‹¨ì„œë¥¼ ì°¾ëŠ”ë‹¤. (ì–¸ì–´)',
    logical:   'ğŸ§® ìƒí™©ì„ ë…¼ë¦¬ì ìœ¼ë¡œ ì •ë¦¬í•´ í•´ê²°ì±…ì„ ì„¸ìš´ë‹¤. (ë…¼ë¦¬)',
    spatial:   'ğŸ—ºï¸ ì§€í˜•ì„ ë– ì˜¬ë ¤ ìµœì ì˜ ê¸¸ì„ ê³„ì‚°í•œë‹¤. (ê³µê°„)',
    bodily:    'âš”ï¸ ëª¸ìœ¼ë¡œ ì•ì¥ì„œì„œ ëŒíŒŒí•œë‹¤. (ì‹ ì²´)',
    musical:   'ğŸ¥ ë¦¬ë“¬ìœ¼ë¡œ ë™ë£Œì˜ í˜¸í¡ì„ ë§ì¶˜ë‹¤. (ìŒì•…)',
    interpersonal:'ğŸ¤ ë™ë£Œì™€ ë¨¸ë¦¬ë¥¼ ë§ëŒ€ê³  í˜‘ë ¥í•œë‹¤. (ëŒ€ì¸)',
    intrapersonal:'ğŸ§˜ ìŠ¤ìŠ¤ë¡œì˜ ë§ˆìŒì„ ë‹¤ìŠ¤ë¦¬ë©° ì¹¨ì°©í•˜ê²Œ ì„ íƒí•œë‹¤. (ìê¸°ì´í•´)',
    naturalist:'ğŸŒ¿ ìì—°ì˜ í”ì ì—ì„œ ì‹¤ë§ˆë¦¬ë¥¼ ì°¾ëŠ”ë‹¤. (ìì—°)'
  },
  wizard: {
    linguistic: 'ğŸ“– ê³ ëŒ€ ë¬¸ì¥ì„ ì²œì²œíˆ í•´ë…í•œë‹¤. (ì–¸ì–´)',
    logical:   'ğŸ§© ë£¬ì˜ ê·œì¹™ì„ ë¶„ì„í•˜ì—¬ í•´ë²•ì„ ë§Œë“ ë‹¤. (ë…¼ë¦¬)',
    spatial:   'ğŸ”· ë§ˆë²•ì§„ì„ ì‹œê°í™”í•´ êµ¬ì¡°ë¥¼ ì´í•´í•œë‹¤. (ê³µê°„)',
    bodily:    'âœ‹ ì†ì˜ ë™ì‘ìœ¼ë¡œ ì„¬ì„¸í•œ ë§ˆë²•ì„ ê±´ë‹¤. (ì‹ ì²´)',
    musical:   'ğŸ¼ ì£¼ë¬¸ì˜ ìŒê³„ë¥¼ ë§ì¶° ê³µëª…ì„ ìœ ë„í•œë‹¤. (ìŒì•…)',
    interpersonal:'ğŸ—£ï¸ ì •ë ¹ê³¼ ëŒ€í™”í•´ ë„ì›€ì„ ì²­í•œë‹¤. (ëŒ€ì¸)',
    intrapersonal:'ğŸ§˜ ìì‹ ì˜ ë‚´ë©´ì—ì„œ ë‹¨ì„œë¥¼ ì°¾ëŠ”ë‹¤. (ìê¸°ì´í•´)',
    naturalist:'ğŸƒ ìì—°ì˜ ê¸°ìš´ì„ ë¹Œë ¤ ì£¼ë¬¸ì„ ë³´ì™„í•œë‹¤. (ìì—°)'
  },
  archer: {
    linguistic: 'ğŸ“ í”ì ì„ ê¸°ë¡í•´ íë¦„ì„ ì •ë¦¬í•œë‹¤. (ì–¸ì–´)',
    logical:   'ğŸ“ ê±°ë¦¬ì™€ ë°”ëŒì„ ê³„ì‚°í•´ ê°ë„ë¥¼ ì¡ëŠ”ë‹¤. (ë…¼ë¦¬)',
    spatial:   'ğŸ¯ ì§€í˜•ì„ ì…ì²´ì ìœ¼ë¡œ íŒŒì•…í•´ ì‚¬ê²© ìœ„ì¹˜ë¥¼ ì •í•œë‹¤. (ê³µê°„)',
    bodily:    'ğŸƒ ëŠ¥ìˆ™í•œ ëª¸ë†€ë¦¼ìœ¼ë¡œ ìœ ë¦¬í•œ ìë¦¬ë¡œ ì´ë™í•œë‹¤. (ì‹ ì²´)',
    musical:   'ğŸµ ë°”ëŒì˜ ë¦¬ë“¬ì„ íƒ€ë©° ì •í™•ë„ë¥¼ ë†’ì¸ë‹¤. (ìŒì•…)',
    interpersonal:'ğŸ‘¥ ë™ë£Œì™€ ì‹ í˜¸ë¥¼ ì£¼ê³ ë°›ì•„ í˜‘ë ¥í•œë‹¤. (ëŒ€ì¸)',
    intrapersonal:'ğŸ§˜ í˜¸í¡ê³¼ ë§ˆìŒì„ ê°€ë‹¤ë“¬ì–´ ì§‘ì¤‘í•œë‹¤. (ìê¸°ì´í•´)',
    naturalist:'ğŸ¦Œ ë™ë¬¼ì˜ ìŠµì„±ì„ ì½ì–´ í–‰ë™ì„ ì˜ˆì¸¡í•œë‹¤. (ìì—°)'
  },
  healer: {
    linguistic: 'âœï¸ ì¦ìƒê³¼ ë³€í™”ë¥¼ ê¼¼ê¼¼íˆ ê¸°ë¡í•´ ì†Œí†µí•œë‹¤. (ì–¸ì–´)',
    logical:   'âš–ï¸ ì›ì¸ê³¼ ê²°ê³¼ë¥¼ ì •ë¦¬í•´ ì²˜ë°©ì„ ë§ˆë ¨í•œë‹¤. (ë…¼ë¦¬)',
    spatial:   'ğŸ§­ ì¹˜ë£Œ ê³µê°„ì„ íš¨ìœ¨ì ìœ¼ë¡œ ë°°ì¹˜í•œë‹¤. (ê³µê°„)',
    bodily:    'ğŸ¤² ì†ê¸°ìˆ ë¡œ ì§ì ‘ ëŒë³¸ë‹¤. (ì‹ ì²´)',
    musical:   'ğŸ¶ ì•ˆì •ê°ì„ ì£¼ëŠ” ë©œë¡œë””ë¡œ ë§ˆìŒì„ ë‹¤ë…ì¸ë‹¤. (ìŒì•…)',
    interpersonal:'ğŸ’¬ ê³µê°ì˜ ë§ë¡œ ì‹ ë¢°ë¥¼ ìŒ“ëŠ”ë‹¤. (ëŒ€ì¸)',
    intrapersonal:'ğŸ«€ ìê¸° ìƒíƒœë¥¼ ì ê²€í•˜ë©° ê· í˜•ì„ ìœ ì§€í•œë‹¤. (ìê¸°ì´í•´)',
    naturalist:'ğŸŒ± ì•½ì´ˆì™€ ìì—°ì˜ í˜ìœ¼ë¡œ ì¹˜ìœ ë¥¼ ë•ëŠ”ë‹¤. (ìì—°)'
  }
};

// ===== ROTATION: 20ë‹¨ê³„ ë™ì•ˆ 4ì„ ì§€ íŒ¨í„´ =====
const ROTATION = [
  ['linguistic','logical','interpersonal','bodily'],
  ['spatial','naturalist','intrapersonal','musical'],
  ['logical','spatial','bodily','interpersonal'],
  ['naturalist','linguistic','musical','intrapersonal'],
  ['bodily','spatial','logical','naturalist'],
  ['musical','interpersonal','linguistic','intrapersonal'],
  ['spatial','logical','musical','bodily'],
  ['interpersonal','intrapersonal','linguistic','naturalist'],
  ['logical','naturalist','spatial','interpersonal'],
  ['linguistic','musical','bodily','intrapersonal'],
  ['naturalist','spatial','interpersonal','logical'],
  ['musical','linguistic','intrapersonal','bodily'],
  ['spatial','naturalist','logical','linguistic'],
  ['interpersonal','musical','bodily','spatial'],
  ['intrapersonal','linguistic','naturalist','logical'],
  ['bodily','interpersonal','spatial','musical'],
  ['logical','intrapersonal','linguistic','naturalist'],
  ['spatial','bodily','musical','interpersonal'],
  ['naturalist','logical','intrapersonal','linguistic'],
  ['musical','spatial','interpersonal','bodily']
];

// ===== ë¹Œë“œ: ìºë¦­í„°ë³„ 20ë‹¨ê³„ í€˜ìŠ¤íŠ¸ ìƒì„± =====
function buildQuests(charId){
  const list = CHAPTERS[charId];
  return list.map((pair, idx)=>{
    const [title, text] = pair;
    const keys = ROTATION[idx];
    const options = keys.map(k=>({ t: TPL[charId][k], e: {[k]: 12} }));
    return { title, text, options };
  });
}
const quests = { warrior: buildQuests('warrior'), wizard: buildQuests('wizard'), archer: buildQuests('archer'), healer: buildQuests('healer') };

// ===== ì¸í„°ë™ì…˜ ë° ìƒíƒœê´€ë¦¬ =====
function resetGame(){
  scores = JSON.parse(JSON.stringify(baseScores));
  player = {name:'',clazz:'',charId:'',questIndex:0};
  document.querySelectorAll('.char').forEach(c=>c.classList.remove('selected'));
  el('game-area').style.display='none';
  el('result-area').style.display='none';
  el('pre-game').style.display='block';
  el('stats-panel').style.display='none';
  el('input-name').value='';
  el('input-class').value='';
  el('start-btn-text').style.display='inline';
  el('start-btn-spinner').style.display='none';
  checkStartButton();
}
function checkStartButton(){
  const name = el('input-name').value.trim();
  const clazz = el('input-class').value.trim();
  el('btn-start').disabled = !(name && clazz && player.charId);
}

document.querySelectorAll('.char').forEach(node=>{
  node.addEventListener('click',()=>{
    document.querySelectorAll('.char').forEach(c=>c.classList.remove('selected'));
    node.classList.add('selected');
    player.charId = node.dataset.id;
    checkStartButton();
  });
});
el('input-name').addEventListener('input',checkStartButton);
el('input-class').addEventListener('input',checkStartButton);

el('btn-start').addEventListener('click',()=>{
  const name = el('input-name').value.trim();
  const clazz = el('input-class').value.trim();
  if(!(name&&clazz&&player.charId)) return;
  player.name=name; player.clazz=clazz; player.questIndex=0;
  el('start-btn-text').style.display='none'; el('start-btn-spinner').style.display='block';
  S.bgm.play().catch(()=>{});
  setTimeout(()=>{ el('pre-game').style.display='none'; el('game-area').style.display='block'; el('stats-panel').style.display='block'; renderQuest(); el('start-btn-text').style.display='inline'; el('start-btn-spinner').style.display='none'; },800);
});
el('btn-restart').addEventListener('click',resetGame);

function renderQuest(){
  const list = quests[player.charId];
  if(!list || player.questIndex >= list.length){ return showResult(); }
  const q = list[player.questIndex];
  el('quest-title').textContent = `ğŸ“œ Chapter ${player.questIndex+1}: ${q.title}`;
  // ë¬¸ì¥ ì¶œë ¥ì€ ìì—°ìŠ¤ëŸ½ê²Œ í•œ ë²ˆì— ë„£ìŒ (íƒ€ì íš¨ê³¼ ìƒëµí•˜ì—¬ ê°€ë…ì„± í–¥ìƒ)
  el('quest-text').textContent = q.text;
  const root = el('options'); root.innerHTML='';
  q.options.forEach((o)=>{
    const div = document.createElement('div'); div.className='option'; div.textContent = o.t;
    div.onclick = ()=>{ S.click.currentTime=0; S.click.play(); applyEffects(o.e); player.questIndex++; renderStats(); setTimeout(()=>{ S.magic.currentTime=0; S.magic.play(); renderQuest(); },220); };
    root.appendChild(div);
  });
  renderStats();
}
function applyEffects(e){ Object.keys(e).forEach(k=>{ if(scores[k]!==undefined) scores[k]+=e[k]; }); }
function renderStats(){ const root = el('stats'); root.innerHTML=''; Object.keys(scores).forEach(k=>{ const score = Math.min(100, Math.max(0, scores[k])); const box = document.createElement('div'); box.className='stat'; box.innerHTML = `<div style="font-weight:700;color:var(--gold)">${NAMES[k]}</div><div class="bar"><div class="bar-inner" style="width:${score}%"></div></div>`; root.appendChild(box); }); }

function showResult(){ el('game-area').style.display='none'; el('stats-panel').style.display='none'; el('result-area').style.display='block'; const entries = Object.entries(scores).sort((a,b)=>b[1]-a[1]); const [top1, top2, top3] = [entries[0][0], entries[1][0], entries[2][0]]; const resultHTML = `\n    <h3 style="font-family:'Cinzel',serif;color:#5b3e22">ğŸ“œ ëª¨í—˜ì˜ ê²°ê³¼</h3>\n    <p><strong>${player.name}</strong>(${player.clazz}) ëª¨í—˜ê°€ë‹˜, 20ë‹¨ê³„ ì—¬ì •ì„ ë§ˆì³¤ìŠµë‹ˆë‹¤.</p>\n    <p>ë‹¹ì‹ ì˜ ì„ íƒì„ ì¢…í•©í•œ ê²°ê³¼â€¦</p>\n    <h4 style="color:var(--gold);margin:.4em 0">ğŸ¥‡ ë‹¹ì‹ ì˜ ê°•ì  ì§€ëŠ¥ì€ <strong>${NAMES[top1]}</strong> ì…ë‹ˆë‹¤!</h4>\n    <h4 style="color:#bca06c;margin:.2em 0">ğŸ¥ˆ 2ìˆœìœ„: ${NAMES[top2]}</h4>\n    <h4 style="color:#a78556;margin:.2em 0">ğŸ¥‰ 3ìˆœìœ„: ${NAMES[top3]}</h4>\n    <p class="small" style="color:#2e1f13;background:rgba(255,255,255,.85);display:inline-block;padding:10px 12px;border-radius:10px">ê°•ì ì€ ì—°ìŠµìœ¼ë¡œ ë” ì„±ì¥í•©ë‹ˆë‹¤. ë‹¤ë¥¸ ìºë¦­í„°ë¡œë„ ëª¨í—˜í•´ ê²°ê³¼ë¥¼ ë¹„êµí•´ ë³´ì„¸ìš”.</p>\n  `; el('result-content').innerHTML = resultHTML; }

// ì´ˆê¸°í™”
resetGame();
</script>
</body>
</html>
